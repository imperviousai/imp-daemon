(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[356],{39807:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/d/content/[id]",function(){return n(95712)}])},7135:function(e,t,n){"use strict";n.d(t,{BR:function(){return s},kR:function(){return a}});var r=n(88767),o=n(40782),i=n(40874),s=function(e,t){return(0,r.useQuery)("fetch-files",i.uB,{onSuccess:function(t){e(t)},onError:function(e){o.Am.error("Unable to fetch files. Please try again."),console.log("Unable to fetch files. Error: ",e),t()}})},a=function(e,t){var n=(0,r.useQueryClient)();return(0,r.useMutation)(i.cT,{onSuccess:function(){e(),n.invalidateQueries("fetch-files")},onError:function(e){console.log("Error uploading file: ",e),t()}})}},95712:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return W}});var r=n(35666),o=n.n(r),i=n(85893),s=n(67294),a=n(13471),c=n(56727),l=n(10197),u=n(5506),d=n(75026),f=n(10401),m=n(30093),x=n(6828),h=(n(78183),n(19311),n(63090)),p=n(28895),g=n.n(p),b=n(82130);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=n(71167),j=function(e){var t=e.docId,n=e.documentRef,r=e.showAutoSave,o=e.peers,a=e.myDid,c=(0,s.useState)(),l=c[0],u=c[1],d=(0,s.useRef)(new(g())),f=(0,s.useRef)(),m=(0,s.useCallback)((function(){f.current&&t&&b.cp.setItem(t,{contents:f.current.editor.getContents(),lastUpdated:(new Date).toString(),created:(new Date).toString(),owner:null===a||void 0===a?void 0:a.id})}),[null===a||void 0===a?void 0:a.id,t]),x=(0,s.useCallback)((function(e){e&&f.current&&b.cp.getItem(e.detail.id).then((function(e){e&&f.current.editor.setContents(e.contents)})).catch((function(e){return console.log(e)}))}),[]);(0,s.useEffect)((function(){return(0,h.on)("save-draft-local-state",m),function(){(0,h.on)("save-draft-local-state",m)}}),[m]),(0,s.useEffect)((function(){return(0,h.on)("restore-document-draft",x),function(){(0,h.on)("restore-document-draft",x)}}),[x]);var p=(0,s.useCallback)((function(e){var n={type:"quill-delta-update",from:null===a||void 0===a?void 0:a.id,data:e,timestamp:(new Date).toString(),networkId:t};o.forEach((function(e){e.peer._channelReady&&e.peer.write(JSON.stringify(n))}))}),[t,null===a||void 0===a?void 0:a.id,o]);(0,s.useEffect)((function(){var e=f.current.getEditor();n.current=e,u(e)}),[n]),(0,s.useEffect)((function(){b.jI.getItem(t).then((function(e){e&&f.current.editor.setContents(e.contents)})).catch((function(e){return console.log(e)}))}),[t]),(0,s.useEffect)((function(){setInterval((function(){d.current.length()>0&&f.current&&b.jI.getItem(t).then((function(e){return e?b.jI.setItem(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}({},e,{contents:f.current.editor.getContents(),lastUpdated:(new Date).toString()})):(console.log("no doc"),void 0!==t?b.jI.setItem(t,{contents:f.current.editor.getContents(),lastUpdated:(new Date).toString(),created:(new Date).toString(),owner:null===a||void 0===a?void 0:a.id}):void 0)})).then((function(){r(),d.current=new(g())})).catch((function(e){return console.log(e)}))}),3e3)}),[t,r,null===a||void 0===a?void 0:a.id]),(0,s.useEffect)((function(){if(null!=l){var e=function(e,t,n){switch(n){case"user":p(e),d.current=d.current.compose(e);break;case"api":d.current=d.current.compose(e)}};return l.on("text-change",e),function(){l.off("text-change",e)}}}),[f,p,l]);var j=(0,s.useCallback)((function(e){var t=e.detail.data;l&&l.updateContents(t)}),[l]);(0,s.useEffect)((function(){if(l)return(0,h.on)("quill-delta-update",j),function(){(0,h.S1)("quill-delta-update",j)}}),[l,j]);return(0,i.jsx)(y,{ref:f,className:"w-full h-full",placeholder:"Start your journey ...",modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike","blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],["link","image"],["clean"]]},formats:["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","align","code-block"],theme:"snow"})},w=n(68121),N=n(41664),C=n(11163),k=n(88554),S=n(30653),E=n(40782),I=n(64449),O=n(91131),P=n(7135),T=n(46249),D=n(6218),A=n(30381),F=n.n(A),R=n(24796),_=n(93162),Z=n(83573);function q(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,o)}function U(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){q(i,r,o,s,a,"next",e)}function a(e){q(i,r,o,s,a,"throw",e)}s(void 0)}))}}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Y(e,t,n[t])}))}return e}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){o=!0,i=c}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var M=["docx","pdf","html"];var W=function(){var e=(0,s.useState)(!1),t=e[0],r=e[1],p=(0,s.useState)(!1),g=p[0],v=p[1],y=(0,s.useState)(!1),A=y[0],q=y[1],Y=(0,s.useState)(""),W=Y[0],X=Y[1],B=(0,s.useState)(!1),G=B[0],H=B[1],Q=(0,s.useState)(!1),L=Q[0],V=Q[1],J=(0,s.useState)(),$=J[0],ee=J[1],te=K((0,O.KO)(b.uy),1)[0],ne=K((0,O.KO)(b.sY),2)[1],re=((0,P.kR)().mutate,(0,T.LU)().data),oe=((0,D.ff)().data,(0,C.useRouter)()),ie=oe.query.id;(0,s.useEffect)((function(){b.cp.iterate((function(e,t,n){t===ie&&V(!0)}))}),[ie,te]),(0,s.useEffect)((function(){ie&&(ne(ie),b.jI.getItem(ie).then((function(e){return ee(e)})).catch((function(e){return console.log("Unable to retrieve document")})))}),[ie,ne]);var se=(0,s.useCallback)((function(e){var t=e.detail,n=t.title,r=t.docId;ie===r&&X(n)}),[ie]);(0,s.useEffect)((function(){return(0,h.on)("quill-delta-title-update",se),function(){(0,h.S1)("quill-delta-title-update",se)}}),[se]);var ae=(0,s.useRef)(),ce=function(){var e=ae.current.getContents(),t={encodeHtml:!0,inlineStyles:{font:{serif:"font-family: Georgia, Times New Roman, serif",monospace:"font-family: Monaco, Courier New, monospace"},size:{small:"font-size: 0.75em",large:"font-size: 1.5em",huge:"font-size: 2.5em"},indent:function(e,t){var n=3*parseInt(e,10);return"padding-"+("rtl"===t.attributes.direction?"right":"left")+":"+n+"em"},direction:function(e,t){return"rtl"===e?"direction:rtl"+(t.attributes.align?"":"; text-align: inherit"):""}}};return new k.bc(e.ops,t).convert()},le=U(o().mark((function e(){var t,r,i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ae.current,r=t.getContents(),e.next=4,n.e(192).then(n.t.bind(n,37542,23));case 4:return i=e.sent.pdfExporter,e.next=7,i.generatePdf(r);case 7:s=e.sent,(0,_.saveAs)(s,"".concat(W.length?W:ie,".pdf"));case 9:case"end":return e.stop()}}),e)}))),ue=U(o().mark((function e(){var t,r,i,s,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ae.current,r=t.getContents(),i={exportAs:"blob"},e.next=5,Promise.all([n.e(301),n.e(7)]).then(n.t.bind(n,40007,23));case 5:return s=e.sent,e.next=8,s.generateWord(r,i);case 8:a=e.sent,(0,_.saveAs)(a,"".concat(W.length?W:ie,".docx"));case 10:case"end":return e.stop()}}),e)}))),de=function(e){"html"===e&&function(){var e="<!DOCTYPE html><html>".concat(ce(),"</html>"),t=new File([e],"".concat(W,".html"),{type:"text/html"});(0,_.saveAs)(t,"".concat(W.length?W:ie,".html"))}(),"pdf"===e&&le(),"docx"===e&&ue()};(0,s.useEffect)((function(){b.jI.getItem(ie).then((function(e){return e&&e.title&&X(e.title)}))}),[ie]);var fe=function(){(0,E.Am)((function(e){var t=e.closeToast;return(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"pb-4",children:"Restore this document?"}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)("button",{type:"button",onClick:function(){(0,h.X$)("restore-document-draft",{id:ie}),t()},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Restore"}),(0,i.jsx)("button",{type:"button",onClick:t,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1})},me=function(){(0,E.Am)((function(e){var t=e.closeToast;return(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"pb-4",children:"Delete document state?"}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)("button",{type:"button",onClick:function(){V(!1),b.cp.removeItem(ie),t()},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Restore"}),(0,i.jsx)("button",{type:"button",onClick:t,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1})},xe=function(){var e=(0,s.useState)(""),t=e[0],n=e[1];return(0,s.useEffect)((function(){if(ae.current){var e=ce();n(e)}}),[]),(0,i.jsx)("div",{className:"pt-4",children:(0,S.ZP)(t)})},he=function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"space-y-5",children:[(0,i.jsx)("div",{className:"mt-4 flex space-x-3 md:mt-0",children:(0,i.jsxs)("button",{type:"button",onClick:function(){(0,E.Am)((function(e){return e.closeToast,(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"pb-4 flex flex-col w-full justify-center",children:[(0,i.jsx)("p",{className:"pb-4 text-grey-900",children:"Save As ..."}),(0,i.jsx)("span",{className:"relative z-0 inline-flex shadow-sm rounded-md",children:M.map((function(e,t){return(0,i.jsx)("button",{type:"button",onClick:function(){return de(e)},className:"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:(0,i.jsx)("p",{className:"font-semibold",children:e.toUpperCase()})},t)}))})]})})}),{autoClose:!1})},className:"w-full inline-flex justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900",children:[(0,i.jsx)(l.Z,{className:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),(0,i.jsx)("span",{children:"Save/Download"})]})}),(0,i.jsxs)("div",{className:"mt-4 flex space-x-3 md:mt-0",children:[(0,i.jsxs)("button",{type:"button",onClick:function(){return H(!G)},className:"inline-flex justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900",children:[(0,i.jsx)(d.Z,{className:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),(0,i.jsx)("span",{children:G?"Edit":"Preview"})]}),(0,i.jsxs)("button",{type:"button",onClick:function(){(0,E.Am)((function(e){var t=e.closeToast;return(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"pb-4",children:"Delete this file?"}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)("button",{type:"button",onClick:function(){b.jI.removeItem(ie).then((function(){oe.back(),E.Am.success("Document removed."),t()}))},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Delete"}),(0,i.jsx)("button",{type:"button",onClick:t,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1})},className:"inline-flex justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900",children:[(0,i.jsx)(u.Z,{className:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),(0,i.jsx)("span",{children:"Delete"})]})]}),(0,i.jsx)("div",{className:"flex flex-col space-y-3",children:(0,i.jsxs)("p",{className:"text-sm font-light text-grey-500",children:["Draft ",g&&"(Saving ...)"]})}),(0,i.jsx)("div",{className:"flex items-center space-x-2",children:(0,i.jsx)("button",{type:"button",onClick:function(){return q(!0)},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-primary hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Invite Collaborators"})}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(f.Z,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"}),(0,i.jsxs)("span",{className:"text-gray-900 text-sm font-medium",children:["Created on ","".concat(F()(null===$||void 0===$?void 0:$.created).format("MM.DD.YYYY"))]})]})]}),(0,i.jsxs)("div",{className:"mt-6 border-t border-gray-200 py-6 space-y-8",children:[L&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-sm font-medium text-gray-500",children:"About to connect to a user? We saved a copy of your work in case you need to reset the document to this point in time."}),(0,i.jsxs)("div",{className:"flex items-center space-x-2 pt-4",children:[(0,i.jsx)("button",{type:"button",onClick:fe,className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-primary hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Restore"}),(0,i.jsx)("button",{type:"button",onClick:me,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-sm font-medium text-gray-500",children:"Connected Users"}),(0,i.jsx)("ul",{role:"list",className:"mt-3 space-y-3",children:te.map((function(e,t){return(0,i.jsx)("li",{className:"flex justify-start group",children:(0,i.jsxs)("a",{href:"#",className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)(x.nQ,z({className:"h-5 w-5"},(0,R.rH)(e.metadata.contact)))}),(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.metadata.contact.name}),(0,i.jsx)(u.Z,{className:"h-5 w-5 text-red-300 hidden group-hover:block",onClick:function(){return function(e){(0,E.Am)((function(t){var n=t.closeToast;return(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"pb-4 text-bold",children:"Disconnect with this user?"}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)("button",{type:"button",onClick:function(){e.peer.destroy(),n()},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Disconnect"}),(0,i.jsx)("button",{type:"button",onClick:n,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1})}(e)}})]})},t)}))})]})]})]})};return(0,i.jsx)("div",{className:"bg-white",children:(0,i.jsxs)(a.Z,{currentPage:"Live Docs",children:[(0,i.jsx)(I.Z,{open:A,setOpen:q,networkId:ie,localStream:!1,title:"Invite Users to Collaborate With",subtitle:"Invite people to work on this document with.",type:"doc-collab-request"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.uT.Root,{show:t,as:s.Fragment,children:(0,i.jsxs)(c.Vq,{as:"div",className:"fixed inset-0 flex z-40 md:hidden",onClose:r,children:[(0,i.jsx)(c.uT.Child,{as:s.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,i.jsx)(c.Vq.Overlay,{className:"fixed inset-0 bg-gray-600 bg-opacity-75"})}),(0,i.jsx)(c.uT.Child,{as:s.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:(0,i.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[(0,i.jsx)(c.uT.Child,{as:s.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,i.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:(0,i.jsxs)("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:function(){return r(!1)},children:[(0,i.jsx)("span",{className:"sr-only",children:"Close sidebar"}),(0,i.jsx)(u.Z,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})})}),(0,i.jsx)("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:(0,i.jsx)("nav",{className:"mt-5 px-2 space-y-1 pl-8",children:(0,i.jsx)(he,{})})})]})}),(0,i.jsx)("div",{className:"flex-shrink-0 w-14"})]})}),(0,i.jsx)("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:right-0",children:(0,i.jsx)("div",{className:"flex-1 flex flex-col min-h-0 border-r border-gray-200",children:(0,i.jsx)("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:(0,i.jsx)("nav",{className:"mt-5 flex-1 px-2 space-y-1 border-l",children:(0,i.jsx)(he,{})})})})}),(0,i.jsxs)("div",{className:"md:pr-64 flex flex-col flex-1",children:[(0,i.jsxs)("div",{className:"sticky top-0 z-10 md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 flex justify-between",children:[(0,i.jsx)(N.default,{href:"/d/content",passHref:!0,children:(0,i.jsx)("button",{type:"button",className:"mt-2.5 ml-2.5 inline-flex items-center mb-4 px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm hover:bg-gray-200 text-primary hover:text-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:(0,i.jsx)(w.Z,{className:"w-6 h-6"})})}),(0,i.jsxs)("button",{type:"button",className:"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500",onClick:function(){return r(!0)},children:[(0,i.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,i.jsx)(m.Z,{className:"h-6 w-6","aria-hidden":"true"})]})]}),(0,i.jsx)("main",{className:"flex-1",children:(0,i.jsxs)("div",{className:"pt-1 pb-6",children:[(0,i.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:(0,i.jsx)(N.default,{href:"/d/content",passHref:!0,children:(0,i.jsx)("button",{type:"button",className:"hidden md:flex mt-2.5 ml-2.5 inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm hover:bg-gray-200 text-primary hover:text-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:(0,i.jsx)(w.Z,{className:"w-6 h-6"})})})}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-48 flex flex-col",children:[(0,i.jsx)("input",{className:"text-2xl font-medium text-gray-900 w-full pt-2",defaultValue:W,value:W,onChange:function(e){return t=e.target.value,(0,Z.Z)(t,ie),X(t),void te.forEach((function(e){e.peer.connected&&e.peer.write(JSON.stringify({type:"quill-delta-title-update",from:null===re||void 0===re?void 0:re.id,data:{title:t,id:ie},timestamp:(new Date).toString(),networkId:ie}))}));var t},placeholder:"Title"}),(0,i.jsx)("div",{className:"pb-3 xl:pb-0",children:G?(0,i.jsx)(xe,{}):(0,i.jsx)(j,{docId:ie,documentRef:ae,showAutoSave:function(){v(!0),setTimeout((function(){return v(!1)}),1e3)},peers:te,myDid:re})})]})]})})]})]})]})})}},40874:function(e,t,n){"use strict";n.d(t,{uB:function(){return u},cT:function(){return d},_t:function(){return f},oy:function(){return m}});var r=n(35666),o=n.n(r),i=n(49695),s=n(21245),a=n(48764).Buffer;function c(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,o)}var l,u=function(){return(0,i.W)({url:"/v1/ipfs/list",method:"get",headers:{"Grpc-Metadata-X-API-KEY":"".concat(localStorage.getItem("apiKey"))}})},d=function(e){var t=new window.FileReader;t.readAsArrayBuffer(e),t.onloadend=function(){var n=btoa(a(t.result)),r={name:e.name,data:n,updatable:!1};return(0,i.W)({url:"/v1/ipfs/add",method:"post",data:r,headers:{"Grpc-Metadata-X-API-KEY":"".concat(localStorage.getItem("apiKey"))}})}},f=function(e){return(0,i.W)({url:"/v1/ipfs/".concat(e),method:"get",headers:{"Grpc-Metadata-X-API-KEY":"".concat(localStorage.getItem("apiKey"))}})},m=(l=o().mark((function e(t,n){var r,i,a,c,l,u,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.substring(0,20).includes("<!DOCTYPE html>")){e.next=3;break}return r=new File([t],n,{type:"text/html"}),e.abrupt("return",r);case 3:for(i=t.split(","),a=new Uint8Array(i.length),c=0;c<i.length;c++)a[c]=i[c];return e.next=8,(0,s.pM)(a);case 8:if(!(l=e.sent)){e.next=13;break}return console.log("FILETYPE: ",l),u=new File([a],n,{type:l?l.mime:""}),e.abrupt("return",u);case 13:return d=new File([t],n,{type:"text/plain"}),e.abrupt("return",d);case 15:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=l.apply(e,t);function i(e){c(o,n,r,i,s,"next",e)}function s(e){c(o,n,r,i,s,"throw",e)}i(void 0)}))})},50247:function(){}},function(e){e.O(0,[774,270,717,771,126,245,653,487,471,449,888,179],(function(){return t=39807,e(e.s=t);var t}));var t=e.O();_N_E=t}]);