"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[46],{93107:function(e,t,r){var a=r(85893),n=r(69641),s=r(36388),i=r(67294),l=r(6218),c=r(85528),o=r(14887),d=r(11163),x=r(43101),m=r(91131),u=r(18426),h=r(63750),f=r(44156),g=r(40782),p=r(96486),v=r.n(p);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],a=!0,n=!1,s=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(c){n=!0,s=c}finally{try{a||null==l.return||l.return()}finally{if(n)throw s}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.Z=function(){var e=(0,l.ff)().data,t=(0,d.useRouter)(),r=y((0,m.KO)(x.w5),2)[1],p=(0,i.useState)(),j=p[0],N=p[1],w=(0,i.useState)(!1),k=w[0],C=w[1],E=(0,f.r)().data,O=y((0,m.KO)(x.PF),2)[1];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{open:k,setOpen:C,selectedContact:j}),(0,a.jsx)("ul",{role:"list",className:"relative divide-y divide-gray-200",children:v().orderBy(null===e||void 0===e?void 0:e.data.contacts,(function(e){return e.name.toLowerCase()}),["asc"]).map((function(e,i){return(0,a.jsx)("li",{children:(0,a.jsxs)("div",{className:"px-6 py-2 flex items-center space-x-3 hover:bg-gray-50",children:[(0,a.jsx)(c.Z,{contact:e,className:"h-10 w-10"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)(o.Z,{contact:e,className:"h-4 w-4"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{type:"button",className:"inline-flex items-center border border-1 border-gray-300 rounded-full p-1 text-gray-400",onClick:function(){return function(e){r(e),t.push("/d/chat")}(e)},children:(0,a.jsx)(n.Z,{className:"h-5 w-5","aria-hidden":"true"})}),(0,a.jsx)("button",{type:"button",className:"inline-flex items-center border border-1 border-gray-300 rounded-full p-1 text-gray-400",onClick:function(){return function(e){(null===E||void 0===E?void 0:E.data.lightningConfig.listening)?(N(e),C(!0)):g.Am.info("Connect to a lightning node to use this action.")}(e)},children:(0,a.jsx)(h.rrH,{className:"h-5 w-5","aria-hidden":"true"})}),(0,a.jsx)("button",{type:"button",className:"inline-flex items-center border border-1 border-gray-300 rounded-full p-1 text-gray-400",onClick:function(){return function(e){O((function(t){return b(t).concat([e])})),t.push("/d/meeting")}(e)},children:(0,a.jsx)(s.Z,{className:"h-5 w-5","aria-hidden":"true"})})]})]})]})},i)}))})]})}},14887:function(e,t,r){var a=r(85893),n=r(67294);t.Z=function(e){var t=e.contact,r=e.className,s=(0,n.useState)(),i=s[0],l=s[1];return(0,n.useEffect)((function(){if(t){var e=JSON.parse(t.metadata).username;l(e)}}),[t]),(0,a.jsxs)(a.Fragment,{children:[i&&(0,a.jsx)("svg",{className:r,"aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"twitter",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,a.jsx)("path",{fill:"#1D9BF0",d:"M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"})})," "]})}},64046:function(e,t,r){r.r(t),r.d(t,{default:function(){return I}});var a=r(85893),n=r(67294),s=r(60758);var i=n.forwardRef((function(e,t){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),n.createElement("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"}))}));var l=n.forwardRef((function(e,t){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),n.createElement("path",{d:"M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"}),n.createElement("path",{d:"M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z"}))}));var c=n.forwardRef((function(e,t){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),n.createElement("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"}))}));var o=n.forwardRef((function(e,t){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),n.createElement("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"}))})),d=r(13342),x=r(79691),m=r(78757),u=r(96486),h=r.n(u),f=r(63750),g=r(11163),p=r(30381),v=r.n(p),y=r(18426),b=r(6218),j=r(61751),N=r(46249),w=r(91131),k=r(43101),C=r(82130),E=r(5506),O=r(37328),M=r(47193),S=r(59856),Z=r(40782),z=(r(74855),r(96787)),A=r(85528),R=r(20567),F=r(24796),L=r(73210),U=r(44156),D=r(14887),_=r(93107);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],a=!0,n=!1,s=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(c){n=!0,s=c}finally{try{a||null==l.return||l.return()}finally{if(n)throw s}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var H=function(e){var t=e.conversations,r=e.unreadMessages,s=B((0,w.KO)(k.D0),2)[1],l=(0,b.ff)().data,c=(0,j.bj)().mutate,o=(0,g.useRouter)(),x=(0,N.LU)().data,m=(0,n.useState)(!1),u=m[0],f=m[1],p=(0,n.useState)([]),y=p[0],C=p[1];(0,n.useEffect)((function(){t&&C(t)}),[t]);var E=function(e){s(e),o.push("/d/chat")},S=function(e){if("https://didcomm.org/webrtc/1.0/sdp"===(null===e||void 0===e?void 0:e.data.type))return"Sent you an invite to connect.";if("file-transfer-done"===(null===e||void 0===e?void 0:e.data.type))return"File transfer.";var t,r;if(!(0,M.p)(null===e||void 0===e?void 0:e.data.body.content))return"".concat(null===(t=null===e||void 0===e?void 0:e.data.body.content)||void 0===t?void 0:t.slice(0,50).toString()," ").concat((null===(r=null===e||void 0===e?void 0:e.data.body.content)||void 0===r?void 0:r.length)>50?"...":"");var a=JSON.parse(null===e||void 0===e?void 0:e.data.body.content);if(a.data){var n=a.data.name,s=a.dataUri;if(n&&s)return"File transfer."}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,a.jsx)("th",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,a.jsx)("th",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"ml-2 flex-none rounded bg-gray-200 text-gray-900 hover:bg-gray-300",onClick:function(){f(!u),C(h().reverse(y))},children:u?(0,a.jsx)(d.Z,{className:"h-5 w-5","aria-hidden":"true"}):(0,a.jsx)(i,{className:"h-5 w-5","aria-hidden":"true"})}),(0,a.jsx)("span",{className:"lg:pl-2",children:"Conversations"})]})}),(0,a.jsx)("th",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Participants"}),(0,a.jsx)("th",{className:"hidden md:table-cell px-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Latest"}),(0,a.jsx)("th",{className:"pr-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:y&&y.map((function(e,t){var s,i=e.groupId,o=e.messages;return(0,a.jsxs)("tr",{className:"".concat(r[i]>0?"bg-white":"bg-gray-100"),children:[(0,a.jsx)("td",{className:"px-6 py-3 text-sm text-gray-500 font-medium",onClick:function(){return E(i)},children:(0,a.jsx)("div",{className:"flex items-center space-x-2 lg:pl-2",children:(0,a.jsx)("div",{className:"flex flex-shrink-0 -space-x-1 items-center",children:(0,F.Lz)({message:o.slice(-1)[0],contacts:null===l||void 0===l?void 0:l.data.contacts,myDid:x}).map((function(e,t){var r,s,i;return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(A.Z,{contact:e,className:"h-8 w-8"}),(0,a.jsxs)("div",{className:"flex flex-col pl-2",children:[(0,a.jsxs)("div",{className:"pl-2 text-gray-900 text-md font-semibold pr-5 flex items-center space-x-2",children:[null===e||void 0===e?void 0:e.name,e&&(0,a.jsx)(D.Z,{contact:e,className:"ml-2 h-4 w-4"})]}),"Unknown"===(null===e||void 0===e?void 0:e.name)&&(0,F.zi)({messages:o,contact:e})&&(0,a.jsxs)("span",{className:"text-gray-500 font-normal text-xs",children:["(Maybe:"," ",(0,F.zi)({messages:o,contact:e}),")"]}),(null===e||void 0===e?void 0:e.metadata)&&(null===(r=JSON.parse(null===e||void 0===e?void 0:e.metadata))||void 0===r?void 0:r.username)&&(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://twitter.com/".concat(null===(s=JSON.parse(null===e||void 0===e?void 0:e.metadata))||void 0===s?void 0:s.username),className:"pl-2 text-blue-500 text-sm hover:underline font-normal",children:"(@".concat(null===(i=JSON.parse(null===e||void 0===e?void 0:e.metadata))||void 0===i?void 0:i.username,")")})]})]},t)}))})})}),(0,a.jsx)("td",{onClick:function(){return E(i)},className:"px-6 py-3 max-w-0 w-full whitespace-nowrap text-sm font-medium text-gray-900",children:(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsxs)("div",{className:"truncate hover:text-gray-600 flex items-center",children:[r[i]>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-4 pr-4",children:[(0,a.jsx)("div",{className:"bg-primary flex-shrink-0 w-2.5 h-2.5 rounded-full","aria-hidden":"true"}),(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800",children:r[i]})]}),(0,a.jsx)("span",{className:"".concat(r[i]>0?"font-semibold":"font-normal"),children:S(o.slice(-1)[0])})]})})}),(0,a.jsx)("td",{className:"px-6 py-3 text-sm text-gray-500 font-medium",onClick:function(){return E(i)},children:(0,a.jsx)("div",{className:"flex items-center space-x-2 justify-center",children:(0,a.jsx)("div",{className:"flex flex-shrink-0 -space-x-1 items-center",children:(0,F.Lz)({message:o.slice(-1)[0],contacts:null===l||void 0===l?void 0:l.data.contacts,myDid:x}).map((function(e,t){return(0,a.jsx)(n.Fragment,{children:(0,a.jsx)(A.Z,{contact:e,className:"h-6 w-6"},t)},t)}))})})}),(0,a.jsx)("td",{className:"hidden md:table-cell px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-right",onClick:function(){return E(i)},children:v().unix(null===(s=o.slice(-1)[0])||void 0===s?void 0:s.data.created_time).fromNow()}),(0,a.jsx)("td",{className:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:function(){return E(i)},children:(0,a.jsx)("div",{className:"text-indigo-800 hover:text-indigo-900",children:"View"})}),(0,a.jsx)("button",{onClick:function(){return(0,O.SJ)({groupId:i,deleteGroupMessage:c})},children:(0,a.jsx)("div",{className:"text-red-800 hover:text-red-900",children:"Delete"})})]})})]},t)}))})]})})},J=function(e){var t=e.notifications,r=(0,b.ff)().data,s=(0,N.LU)().data;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,a.jsx)("th",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,a.jsx)("th",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsx)("span",{className:"lg:pl-2",children:"Notifications"})}),(0,a.jsx)("th",{className:"hidden md:table-cell px-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),(0,a.jsx)("th",{className:"pr-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:null===t||void 0===t?void 0:t.map((function(e,i){return(0,a.jsxs)("tr",{className:"".concat((0,O.qP)(e.data.created_time)?"bg-white":"bg-gray-100"," "),children:[(0,a.jsx)("td",{className:"px-6 py-3 text-sm text-gray-500 font-medium",onClick:function(){return goToConversation(groupId)},children:(0,a.jsx)("div",{className:"flex items-center space-x-2 lg:pl-2",children:(0,a.jsx)("div",{className:"flex flex-shrink-0 -space-x-1 items-center",children:(0,F.Lz)({message:e,contacts:null===r||void 0===r?void 0:r.data.contacts,myDid:s}).map((function(e,r){var s,i,l;return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(A.Z,{contact:e,className:"h-8 w-8"}),(0,a.jsxs)("div",{className:"flex flex-col pl-2",children:[(0,a.jsxs)("div",{className:"pl-2 text-gray-900 text-md font-semibold pr-5 flex items-center space-x-2",children:[null===e||void 0===e?void 0:e.name,e&&(0,a.jsx)(D.Z,{contact:e,className:"ml-2 h-4 w-4"})]}),"Unknown"===(null===e||void 0===e?void 0:e.name)&&(0,F.zi)({messages:t,contact:e})&&(0,a.jsxs)("span",{className:"text-gray-500 font-normal text-xs",children:["(Maybe:"," ",(0,F.zi)({messages:t,contact:e}),")"]}),(null===e||void 0===e?void 0:e.metadata)&&(null===(s=JSON.parse(null===e||void 0===e?void 0:e.metadata))||void 0===s?void 0:s.username)&&(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://twitter.com/".concat(null===(i=JSON.parse(null===e||void 0===e?void 0:e.metadata))||void 0===i?void 0:i.username),className:"pl-2 text-blue-500 text-sm hover:underline font-normal",children:"(@".concat(null===(l=JSON.parse(null===e||void 0===e?void 0:e.metadata))||void 0===l?void 0:l.username,")")})]})]},r)}))})})}),(0,a.jsx)("td",{className:"px-6 py-3 max-w-0 w-full whitespace-nowrap text-sm font-medium text-gray-900",children:(0,a.jsx)("div",{className:"flex items-center space-x-3 lg:pl-2",children:(0,a.jsx)("div",{href:"#",className:"truncate hover:text-gray-600",children:(0,a.jsx)("span",{className:"".concat((0,O.qP)(e.data.created_time)?"font-bold":"font-normal"),children:(0,a.jsx)("span",{className:"text-gray-500 font-normal",children:"".concat((0,F.Er)({shortFormDid:(0,R.Ho)(e.data.from),contacts:r.data.contacts}).name," invited you to connect")})})})})}),(0,a.jsx)("td",{className:"hidden md:table-cell px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-right",children:v().unix(e.data.created_time).fromNow()}),(0,a.jsx)("td",{className:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsx)(a.Fragment,{children:(0,O.qP)(e.data.created_time)?(0,a.jsx)("button",{onClick:function(){return(0,S.WV)({detail:{message:e.data.body.content,knownContact:(0,F.Er)({shortFormDid:(0,R.Ho)(e.data.from),contacts:r.data.contacts}),sourceType:"didcomm"}})},children:(0,a.jsx)("div",{className:"text-indigo-800 hover:text-indigo-900 pr-2 ",children:"Show"})}):(0,a.jsx)("div",{className:"text-gray-600",children:"Expired"})})})]},i)}))})]})})},T=function(e){var t=e.peers;e.router;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,a.jsx)("th",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsx)("span",{className:"lg:pl-2",children:"Connected Users"})}),(0,a.jsx)("th",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"DID"}),(0,a.jsx)("th",{className:"pr-6 py-3 border-b border-gray-200 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:t.map((function(e,t){return(0,a.jsxs)("tr",{className:"".concat("bg-white"),children:[(0,a.jsx)("td",{className:"px-6 py-3 max-w-0 w-full whitespace-nowrap text-sm font-medium text-gray-900",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3 lg:pl-2",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-3 h-3 rounded-full flex items-center justify-center ".concat("border-2 border-green-400"),"aria-hidden":"true",children:(0,a.jsx)("div",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-green-400 border-2 border-green-400 ","aria-hidden":"true"})}),(0,a.jsx)(A.Z,{contact:e.metadata.contact,className:"h-6 w-6"},t),(0,a.jsx)("div",{className:"truncate hover:text-gray-600",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[e.metadata.contact?e.metadata.contact.name:"Unknown User",e.metadata.contact&&(0,a.jsx)(D.Z,{contact:e.metadata.contact,className:"ml-2 h-4 w-4"})]})})]})}),(0,a.jsx)("td",{className:"px-6 py-3 text-sm text-gray-500 font-medium",children:(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("div",{className:"flex flex-shrink-0 -space-x-1",children:e.metadata.dest})})}),(0,a.jsx)("td",{className:"hidden md:table-cell px-6 py-3 whitespace-nowrap text-sm text-gray-500 text-right",children:"Online"}),(0,a.jsxs)("td",{className:"px-6 py-3 whitespace-nowrap text-right text-sm font-medium",children:[(0,a.jsx)("button",{type:"button",className:"inline-flex items-center p-1",children:(0,a.jsx)(x.Z,{className:"h-5 w-5 text-indigo-800 hover:text-primary-hover","aria-hidden":"true"})}),(0,a.jsx)("button",{type:"button",className:"inline-flex items-center p-1",children:(0,a.jsx)(l,{className:"h-5 w-5 text-indigo-800 hover:text-primary-hover","aria-hidden":"true"})}),(0,a.jsx)("button",{type:"button",className:"inline-flex items-center p-1",children:(0,a.jsx)(f.mly,{className:"h-5 w-5 text-indigo-800 hover:text-primary-hover","aria-hidden":"true"})}),(0,a.jsx)("button",{type:"button",className:"inline-flex items-center p-1",onClick:function(){return e.peer.destroy()},children:(0,a.jsx)(E.Z,{className:"h-5 w-5 text-indigo-800 hover:text-primary-hover","aria-hidden":"true"})})]})]},t)}))})]})})},V=function(e){var t=e.title,r=e.subtitle,n=e.notificationCount,s=e.setCurrentTable,i=e.icon;return(0,a.jsxs)("li",{className:"relative col-span-1 flex shadow-sm rounded-md",onClick:function(){return s(t)},children:[(0,a.jsxs)("div",{className:"bg-primary flex-shrink-0 flex items-center justify-center w-16 text-white text-sm font-medium rounded-l-md px-4",children:[(0,a.jsx)("div",{className:"".concat(n>0?"bg-green-500":"bg-opacity-100"," flex-shrink-0 w-3 h-3 rounded-full absolute top-0 right-0"),"aria-hidden":"true"}),i]}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-between border-t border-r border-b border-gray-200 bg-white rounded-r-md truncate",children:(0,a.jsxs)("div",{className:"flex-1 px-4 py-2 text-sm truncate",children:[(0,a.jsx)("div",{href:"#",className:"text-gray-900 font-medium hover:text-gray-600",children:t}),(0,a.jsxs)("p",{className:"text-gray-500",children:[n," ",r]})]})})]},t)};function I(){var e=(0,n.useState)("Messages"),t=e[0],r=e[1],i=(0,n.useState)(!1),d=i[0],u=i[1],p=(0,n.useState)({}),v=p[0],E=p[1],O=(0,n.useState)([]),M=O[0],S=O[1],A=(0,n.useState)([]),R=A[0],F=A[1],D=(0,g.useRouter)(),I=B((0,w.KO)(k.Lu),1)[0],K=B((0,w.KO)(C.R3),1)[0],P=(B((0,w.KO)(z.UX),1)[0],(0,N.LU)().data),q=(0,b.JA)().data,G=(0,b.ff)().data,Q=(0,L.p)().data,W=(0,j.mA)({contacts:null===G||void 0===G?void 0:G.data.contacts,myDid:P,blocklist:q,settings:Q}).data,X=(0,U.r)().data;(0,n.useEffect)((function(){if(K){var e=K.filter((function(e){return e.peer._connected}));F(h().uniqBy(e,"metadata.dest"))}}),[K]),(0,n.useEffect)((function(){var e=0,t={total:0};if(W){var r=W.conversations,a=W.notifications;r&&r.forEach((function(e){var r=e.messages.filter((function(e){return-1===I.indexOf(e.id)})).length;t[e.groupId]=r,t.total+=r})),a&&(e=a.filter((function(e){return-1===I.indexOf(e.id)})).length)}E(t),S(e)}),[I,W]);return(0,a.jsx)(s.Z,{currentPage:"Dashboard",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{open:d,setOpen:u,selectedContact:null}),(0,a.jsxs)("div",{className:"flex h-full",children:[(0,a.jsx)("div",{className:"flex flex-col w-5/6",children:(0,a.jsxs)("main",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"px-4 mt-6 sm:px-6 lg:px-8",children:[(0,a.jsx)("h2",{className:"text-gray-500 text-xs font-medium uppercase tracking-wide",children:"Quick Actions"}),(0,a.jsxs)("ul",{role:"list",className:"grid grid-cols-1 gap-4 sm:gap-6 sm:grid-cols-2 xl:grid-cols-4 mt-3 ",children:[(0,a.jsx)("li",{children:(0,a.jsxs)("div",{className:"flex-1 flex items-center pt-2 truncate space-x-6",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center pr-2",children:[(0,a.jsx)("button",{type:"button",onClick:function(){return D.push("/d/meeting")},className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-primary hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:(0,a.jsx)(x.Z,{className:"h-5 w-5","aria-hidden":"true"})}),(0,a.jsx)("p",{className:"text-gray-900 font-medium hover:text-gray-600 text-sm pt-1",children:"Meet"})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("button",{type:"button",onClick:function(){return D.push("/d/chat")},className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-primary hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:(0,a.jsx)(c,{className:"h-5 w-5","aria-hidden":"true"})}),(0,a.jsx)("p",{className:"text-gray-900 font-medium hover:text-gray-600 text-sm pt-1",children:"Message"})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("button",{type:"button",onClick:function(){(null===X||void 0===X?void 0:X.data.lightningConfig.listening)?u(!0):Z.Am.info("Connect to a lightning node to use this action.")},className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-primary hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:(0,a.jsx)(f.mly,{className:"h-5 w-5","aria-hidden":"true"})}),(0,a.jsx)("p",{className:"text-gray-900 font-medium hover:text-gray-600 text-sm pt-1",children:"Lightning"})]})]})}),(0,a.jsx)(V,{title:"Messages",subtitle:"Unread Messages",notificationCount:v.total,setCurrentTable:r,icon:(0,a.jsx)(l,{})}),(0,a.jsx)(V,{title:"Notifications",subtitle:"New Notifications",notificationCount:M,setCurrentTable:r,icon:(0,a.jsx)(o,{})}),(0,a.jsx)(V,{title:"Connected Users",subtitle:"Connected Users",notificationCount:R.length,setCurrentTable:r,icon:(0,a.jsx)(m.Z,{})})]})]}),(0,a.jsx)("div",{className:"mt-8 ",children:(0,a.jsxs)("div",{className:"align-middle inline-block min-w-full border-b border-gray-200",children:["Messages"===t&&(0,a.jsx)(H,{unreadMessages:v,conversations:null===W||void 0===W?void 0:W.conversations}),"Notifications"===t&&(0,a.jsx)(J,{notifications:null===W||void 0===W?void 0:W.notifications.slice(-20)}),"Connected Users"===t&&(0,a.jsx)(T,{peers:R,router:D})]})})]})}),(0,a.jsxs)("div",{className:"flex flex-col w-1/6 border-1 border-l",children:[(0,a.jsx)("div",{className:"flex justify-center py-4",children:(0,a.jsx)("h2",{className:"text-sm font-medium text-gray-500 uppercase",children:"Contacts"})}),(0,a.jsx)(_.Z,{})]})]})]})})}},13342:function(e,t,r){var a=r(67294);const n=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}))}));t.Z=n},78757:function(e,t,r){var a=r(67294);const n=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"}))}));t.Z=n},79691:function(e,t,r){var a=r(67294);const n=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"}))}));t.Z=n}}]);