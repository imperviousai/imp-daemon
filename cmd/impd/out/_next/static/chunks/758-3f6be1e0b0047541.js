"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[758],{60758:function(e,n,t){t.d(n,{Z:function(){return Te}});var r=t(35666),s=t.n(r),i=t(85893),a=t(67294),o=t(30471),l=t(11355),c=t(82546),d=t(41782),u=t(69641),m=t(36388),f=t(37051),x=t(63233),h=t(24635),g=t(62435),p=t(5506),v=t(66430),y=t(88100),b=t(91131),j=t(41664),N=t(77358),w=t(24955),C=t.n(w),k=t(41854),D=t(74855),F=t(40782),I=t(46249),S=t(96787),A=t(34220),T=t(48137),O=t(66339),P=t(16573),Z=t(1020),E=t(46616),U=t(87385),_=t(38168),L=t(44276),$=t(12834),z=t(69275),M=t(20567),Q=t(6218),B=t(73933),K=t(43101),X=t(96618),V=t(44156);function R(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,s=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(l){s=!0,i=l}finally{try{r||null==o.return||o.return()}finally{if(s)throw i}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Y(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter(Boolean).join(" ")}function J(){var e=R((0,b.KO)(K.r2),2),n=e[0],t=e[1],r=(0,V.r)().data;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(B.r,{checked:n,onChange:function(e){(null===r||void 0===r?void 0:r.data.lightningConfig.listening)?(t(e),e&&F.Am.info("The Lightning Network is now prioritized for sending and receiving DIDComm messages.")):F.Am.info("Connect to a lightning node to use this action.")},className:Y(n?"bg-indigo-600":"bg-gray-200","relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),children:[(0,i.jsx)("span",{className:"sr-only",children:"Use setting"}),(0,i.jsxs)("span",{className:Y(n?"translate-x-5":"translate-x-0","pointer-events-none relative inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"),children:[(0,i.jsx)("span",{className:Y(n?"opacity-0 ease-out duration-100":"opacity-100 ease-in duration-200","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity"),"aria-hidden":"true",children:(0,i.jsx)("svg",{className:"h-3 w-3 text-gray-400",fill:"none",viewBox:"0 0 12 12",children:(0,i.jsx)("path",{d:"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,i.jsx)("span",{className:Y(n?"opacity-100 ease-in duration-200":"opacity-0 ease-out duration-100","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity"),"aria-hidden":"true",children:(0,i.jsx)(X.Z,{className:"text-indigo-800 h-3 w-3"})})]})]}),(0,i.jsx)("div",{className:"flex",children:(0,i.jsx)("p",{className:"py-2 px-3 rounded-md items-center text-xs font-medium text-indigo-100",children:"Lightning"})})]})}var W=t(17139),H=t(73935);function G(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function q(e){var n=(0,a.useRef)(null);return(0,a.useEffect)((function(){if(n.current){var t=(0,W.H)(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){G(e,n,t[n])}))}return e}({container:n.current,renderer:{createElement:a.createElement,Fragment:a.Fragment,render:H.render},detachedMediaQuery:""},e));return function(){t.destroy()}}}),[e]),(0,i.jsx)("div",{ref:n})}var ee=t(24796),ne=t(88574);function te(e){var n=e.item,t=e.importContact,r=e.goToMessage;return(0,i.jsxs)("div",{className:"flex space-x-4 items-center w-full px-4 hover:bg-gray-100",children:[(0,i.jsx)("button",{type:"button",onClick:function(){t(n)},className:"inline-flex justify-self-end items-center rounded-full border border-transparent bg-blue-400 p-2 text-blue-400 shadow-sm hover:bg-blue-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:(0,i.jsx)(ne.Z,{className:"h-6 w-6","aria-hidden":"true"})}),(0,i.jsx)("button",{type:"button",onClick:function(){r(n)},className:"inline-flex justify-self-end items-center rounded-full border border-transparent bg-blue-400 p-2 text-blue-400 shadow-sm hover:bg-blue-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:(0,i.jsx)(u.Z,{className:"h-6 w-6 m-0.5","aria-hidden":"true"})}),(0,i.jsxs)("div",{className:"flex items-center space-x-4",onClick:function(){t(n)},children:[(0,i.jsx)("img",{className:"inline-block h-8 w-8 rounded-full",src:n.avatarUrl,alt:""}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("p",{className:"text-lg text-gray-900",children:n.name}),(0,i.jsx)("p",{children:(0,i.jsxs)("a",{target:"_blank",rel:"noreferrer",href:"https://twitter.com/".concat(n.username),className:"text-sm text-blue-400 bg-blue-100",children:["@",n.username]})}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:n.shortFormDid})]})]})]})}var re=t(60949),se=t(73359),ie=t(50319),ae=t(31230),oe=t(34353),le=t(53190),ce=t(63750),de=t(54339),ue=t(89583),me=t(29017),fe=t(64343),xe=t(1653),he=function(e){var n=e.open,t=e.setOpen,r=e.amount,s=e.memo,o=e.invoice;return(0,i.jsx)(l.u.Root,{show:n,as:a.Fragment,children:(0,i.jsxs)(c.V,{as:"div",className:"relative z-10",onClose:t,children:[(0,i.jsx)(l.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,i.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-25 transition-opacity"})}),(0,i.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,i.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,i.jsx)(l.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,i.jsx)(c.V.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-sm sm:p-6",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-200",children:(0,i.jsx)(fe.Z,{className:"h-7 w-7 text-gray-900"})}),(0,i.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,i.jsx)(c.V.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Successfully created invoice."}),(0,i.jsxs)("div",{className:"my-2",children:[(0,i.jsxs)("p",{className:"text-sm text-gray-700 pt-1",children:["Amount: ",r," Sats"]}),s&&(0,i.jsxs)("p",{className:"text-sm text-gray-700 pt-1 pb-2",children:["Memo: ",s]}),(0,i.jsx)("div",{className:"flex justify-center py-4",children:(0,i.jsx)(xe.Z,{value:o})}),o&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D.CopyToClipboard,{text:o,onCopy:function(){return F.Am.success("Copied")},children:(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)("div",{className:"border border-gray-300 rounded-md bg-gray-100 p-2",children:(0,i.jsx)("p",{children:"".concat(o.substring(0,16),"...").concat(o.substring(o.length-16))})})})}),(0,i.jsx)(D.CopyToClipboard,{text:o,onCopy:function(){return F.Am.success("Copied")},children:(0,i.jsx)("button",{type:"button",className:"my-3 inline-flex justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:text-sm",onClick:function(){return t(!1)},children:"Copy & Close"})})]})]})]})]})})})})})]})})},ge=t(30381),pe=t.n(ge),ve=t(51993),ye=t.n(ve);function be(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter(Boolean).join(" ")}function je(e){var n=e.open,t=e.setOpen,r=e.setQuickSend,s=[{name:"Actions"},{name:"History"},{name:"Info"}],o=(0,a.useState)([]),d=o[0],u=o[1],m=(0,a.useState)([]),f=m[0],x=m[1],h=(0,a.useState)("Actions"),g=h[0],v=h[1],y=(0,a.useState)(""),b=y[0],j=y[1],N=(0,a.useState)(""),w=N[0],C=N[1],k=(0,a.useState)(""),I=k[0],S=k[1],A=(0,a.useState)(!0),T=A[0],O=A[1],P=(0,a.useState)(!1),Z=P[0],E=P[1],U=(0,a.useState)(!1),_=U[0],L=U[1],$=(0,a.useState)(!1),z=$[0],M=$[1],Q=(0,a.useState)(!0),B=Q[0],K=Q[1],X=(0,V.r)().data,R=(0,me.lQ)().mutate,Y=(0,me.Kl)().mutate,J=(0,me.Pn)().data,W=(0,me._C)().data,H=(0,me.Sx)().data;(0,a.useEffect)((function(){if(H){var e=H.split("$_$").filter((function(e){return e.length})).map((function(e){var n,t,r,s,i=e.split(" ");return{creation_date:null===(n=i.find((function(e){return e.includes("creation_date")})))||void 0===n?void 0:n.split(":")[1],value_sat:null===(t=i.find((function(e){return e.includes("value_sat")})))||void 0===t?void 0:t.split(":")[1],payment_hash:null===(r=i.find((function(e){return e.includes("payment_hash")})))||void 0===r?void 0:r.split(":")[1],fee_sat:null===(s=i.find((function(e){return e.includes("fee_sat")})))||void 0===s?void 0:s.split(":")[1]}}));e.length&&u(e)}}),[H]),(0,a.useEffect)((function(){if(W){var e=W.split("$_$").filter((function(e){return e.length})).map((function(e){var n,t,r,s=e.split(" ");return{amt_paid_sat:null===(n=s.find((function(e){return e.includes("amt_paid_sat")})))||void 0===n?void 0:n.split(":")[1],creation_date:null===(t=s.find((function(e){return e.includes("creation_date")})))||void 0===t?void 0:t.split(":")[1],settled:null===(r=s.find((function(e){return e.includes("settled")})))||void 0===r?void 0:r.split(":")[1]}}));e.length&&x(e)}}),[W]);var G=function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-md text-gray-700 font-semibold",children:"Pay Invoice"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"invoice",className:"block text-sm font-medium text-gray-700",children:"Invoice"}),(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)("input",{type:"text",name:"invoice",id:"invoice",onChange:function(e){return j(e.target.value)},className:"p-2 block w-full rounded-md border-gray-300 border focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Paste Invoice"})}),b.length>0&&(0,i.jsxs)("button",{type:"button",onClick:function(){(0,F.Am)((function(e){var n=e.closeToast;return(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"pb-4",children:"Are you sure you want to pay this invoice?"}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)("button",{type:"button",onClick:function(){Y({invoice:b},{onSuccess:function(e){console.log("Invoice paid: ",e),F.Am.info("Invoice successfully paid.")},onError:function(){return F.Am.error("Unable to pay invoice. Please try again.")}}),n()},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Pay Invoice"}),(0,i.jsx)("button",{type:"button",onClick:n,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1})},className:"w-full justify-center my-3 inline-flex items-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:[(0,i.jsx)(ce.XLv,{className:"-ml-1 mr-2 h-4 w-4","aria-hidden":"true"}),"Pay Invoice"]})]})]})},q=function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-md text-gray-700 font-semibold",children:"Create Invoice"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700",children:"Amount (sats)"}),(0,i.jsx)("div",{className:"my-3",children:(0,i.jsx)("input",{type:"number",name:"amount",id:"amount",onChange:function(e){return C(e.target.value)},className:"p-2 block w-full rounded-md border-gray-300 border focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"100"})}),(0,i.jsx)("label",{htmlFor:"memo",className:"block text-sm font-medium text-gray-700",children:"Memo (optional)"}),(0,i.jsx)("div",{className:"mt-3",children:(0,i.jsx)("input",{type:"text",name:"memo",id:"memo",onChange:function(e){return S(e.target.value)},className:"p-2 block w-full rounded-md border-gray-300 border focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"100"})}),w.length>0&&(0,i.jsxs)("button",{type:"button",onClick:function(){R({amount:w,memo:I},{onSuccess:function(e){e.data.invoice?(j(e.data.invoice),L(!0)):F.Am.error("Unable to create invoice. Please try again.")},onError:function(){return F.Am.error("Unable to create invoice. Please try again.")}})},className:"w-full justify-center my-3 inline-flex items-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:[(0,i.jsx)(ue.m$D,{className:"-ml-1 mr-2 h-4 w-4","aria-hidden":"true"}),"Create Invoice"]})]})]})};return(0,i.jsx)(l.u.Root,{show:n,as:a.Fragment,children:(0,i.jsx)(c.V,{as:"div",className:"absolute fixed overflow-hidden z-10",onClose:t,children:(0,i.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,i.jsx)(c.V.Overlay,{className:"absolute inset-0"}),(0,i.jsx)("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10 sm:pl-16",children:(0,i.jsx)(l.u.Child,{as:a.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,i.jsxs)("div",{className:"pointer-events-auto w-screen max-w-md",children:[(0,i.jsx)(he,{open:_,setOpen:L,amount:w,memo:I,invoice:b}),(0,i.jsx)("div",{className:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl",children:(0,i.jsxs)("div",{className:"h-0 flex-1 overflow-y-auto",children:[(0,i.jsxs)("div",{className:"bg-primary py-6 px-4 sm:px-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)(c.V.Title,{className:"text-lg font-medium text-white inline-flex items-center",children:["Wallet ",(0,i.jsx)(ce.CNn,{className:"w-5 h-5 ml-2 mb-0.5"})]}),(0,i.jsx)("div",{className:"ml-3 flex h-7 items-center",children:(0,i.jsxs)("button",{type:"button",className:"rounded-md bg-indigo-700 text-indigo-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white",onClick:function(){return t(!1)},children:[(0,i.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,i.jsx)(p.Z,{className:"h-6 w-6","aria-hidden":"true"})]})})]}),(0,i.jsxs)("div",{className:"mt-1",children:[(0,i.jsx)("p",{className:"text-indigo-300 text-md",children:"Your Balance"}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsxs)("p",{className:"text-lg font-bold text-white",children:[Number(J).toLocaleString()," Sats (",J&&ye().toBitcoin(J)," ","BTC)"]}),(0,i.jsx)("span",{children:(0,i.jsx)(ue.eJs,{className:"ml-2 h-5 w-5 text-white"})})]})]})]}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"sm:hidden",children:[(0,i.jsx)("label",{htmlFor:"tabs",className:"sr-only",children:"Select a tab"}),(0,i.jsx)("select",{id:"tabs",name:"tabs",className:"block w-full rounded-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500",children:s.map((function(e){return(0,i.jsx)("option",{children:e.name},e.name)}))})]}),(0,i.jsx)("div",{className:"hidden sm:block",children:(0,i.jsx)("div",{className:"border-b border-gray-200",children:(0,i.jsx)("nav",{className:"-mb-px flex justify-center","aria-label":"Tabs",children:s.map((function(e){return(0,i.jsx)("p",{onClick:function(){return v(e.name)},className:be(g===e.name?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","w-1/4 py-4 px-1 text-center border-b-2 font-medium text-sm"),children:e.name},e.name)}))})})})]}),"Info"===g&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"py-8 px-16 w-full flex flex-col space-y-3",children:(null===X||void 0===X?void 0:X.data.lightningConfig.pubkey)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"font-semibold text-sm",children:"Public Key"}),(0,i.jsx)("div",{className:"flex w-full",children:(0,i.jsx)(D.CopyToClipboard,{text:null===X||void 0===X?void 0:X.data.lightningConfig.pubkey,onCopy:function(){return F.Am.success("Copied")},children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("p",{className:"text-sm",children:"".concat(null===X||void 0===X?void 0:X.data.lightningConfig.pubkey.substring(0,16),"...").concat(null===X||void 0===X?void 0:X.data.lightningConfig.pubkey.substring((null===X||void 0===X?void 0:X.data.lightningConfig.pubkey.length)-16))}),(0,i.jsx)(de.Z,{className:"text-gray-500 hover:text-gray-900 h-5 w-5 ml-3"})]})})})]})})}),"Actions"===g&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"py-8 px-16 w-full flex flex-col space-y-3",children:[(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"font-semibold text-sm",children:"Payments"}),(0,i.jsxs)("span",{className:"isolate inline-flex rounded-md w-full",children:[(0,i.jsxs)("button",{type:"button",onClick:function(){E(!1),O(!0)},className:"relative inline-flex items-center rounded-l-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[(0,i.jsx)(ce.XLv,{className:"text-gray-700 h-4 w-4 mr-2"}),"Pay Invoice"]}),(0,i.jsxs)("button",{type:"button",onClick:function(){E(!0),O(!1)},className:"relative -ml-px inline-flex items-center rounded-r-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[(0,i.jsx)(ue.m$D,{className:"text-gray-700 h-4 w-4 mr-2"}),"Create Invoice"]})]})]}),(0,i.jsxs)(i.Fragment,{children:[Z&&q(),T&&G(),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-md text-gray-700 font-semibold",children:"Lightning Quick Send"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Instantly send sats to anyone via the Lightning Network."}),(0,i.jsx)("div",{children:(0,i.jsxs)("button",{type:"button",onClick:function(){return r(!0)},className:"w-full justify-center my-2 inline-flex items-center rounded-md border border-transparent bg-primary px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:[(0,i.jsx)(ce.XLv,{className:"-ml-1 mr-2 h-4 w-4","aria-hidden":"true"}),"Open Quick Send"]})})]})]})]})}),"History"===g&&(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"py-8 px-16 w-full flex flex-col space-y-3",children:[(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"font-semibold text-sm",children:"History"}),(0,i.jsxs)("span",{className:"isolate inline-flex rounded-md w-full",children:[(0,i.jsxs)("button",{type:"button",onClick:function(){K(!0),M(!1)},className:"relative inline-flex items-center rounded-l-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[(0,i.jsx)(ce.XLv,{className:"text-gray-700 h-4 w-4 mr-2"}),"Payment"]}),(0,i.jsxs)("button",{type:"button",onClick:function(){K(!1),M(!0)},className:"relative -ml-px inline-flex items-center rounded-r-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500",children:[(0,i.jsx)(ue.m$D,{className:"text-gray-700 h-4 w-4 mr-2"}),"Invoices"]})]})]}),(0,i.jsxs)(i.Fragment,{children:[z&&(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)("ul",{role:"list",className:"divide-y divide-gray-200",children:f.map((function(e,n){return(0,i.jsxs)("li",{className:"flex py-2 items-center border-b border-gray-20 justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(ue.m$D,{className:"text-primary h-5 w-5 mr-2"}),(0,i.jsxs)("div",{className:"ml-3",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-900",children:pe().unix(e.creation_date).fromNow()}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Invoice"})]})]}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm font-bold text-green-600",children:[e.amt_paid_sat," sats"]})})]},n)}))})]}),B&&(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)("ul",{role:"list",className:"divide-y divide-gray-200",children:d.map((function(e,n){return(0,i.jsxs)("li",{className:"flex py-2 items-center border-b border-gray-20 justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(ce.XLv,{className:"text-primary h-4 w-4 mr-2"}),(0,i.jsxs)("div",{className:"ml-3",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-900",children:pe().unix(e.creation_date).fromNow()}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Payments"})]})]}),(0,i.jsx)("div",{children:(0,i.jsxs)("p",{className:"text-sm font-bold text-gray-600",children:[e.value_sat," sats"]})})]},n)}))})]})]})]})})]})]})})]})})})]})})})}var Ne=t(18426),we=t(11163);t(93288);function Ce(e,n,t,r,s,i,a){try{var o=e[i](a),l=o.value}catch(c){return void t(c)}o.done?n(l):Promise.resolve(l).then(r,s)}function ke(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,s=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(l){s=!0,i=l}finally{try{r||null==o.return||o.return()}finally{if(s)throw i}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var De=[{name:"Dashboard",href:"/d/dashboard",icon:d.Z,current:!1},{name:"Messaging",href:"/d/chat",icon:u.Z,current:!1},{name:"Meet",href:"/d/meeting",icon:m.Z,current:!1},{name:"Live Docs",href:"/d/content",icon:f.Z,current:!0},{name:"Contacts",href:"/d/contacts",icon:x.Z,current:!1},{name:"Settings",href:"/d/settings",icon:h.Z,current:!1}];function Fe(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter(Boolean).join(" ")}var Ie=function(e){var n=e.myDid,t=ke((0,b.KO)(S.Dm),2)[1],r=ke((0,b.KO)(S.UX),2),s=r[0],c=r[1],d=(0,y.D3)().user;(0,a.useEffect)((function(){n&&(0,M.YH)(n.id).then((function(e){t(JSON.parse(e.data.document)),c(e.data.longFormDid)})).catch((function(e){console.log(e)}))}),[n,c,t]);var u=d?"Connect with me on the Impervious Browser @".concat(d.nickname,"! @ImperviousAi"):"Connect with me on the Impervious Browser! @ImperviousAi",m="https://impervious.ai";return(0,i.jsxs)(o.v,{as:"div",className:"relative inline-block text-left",children:[(0,i.jsx)("div",{children:(0,i.jsxs)(o.v.Button,{className:"order-0 inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary hover:bg-primary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:order-1 sm:ml-3",children:[(0,i.jsx)(oe.Z,{className:"h-4 w-4 mr-1"})," Share"]})}),(0,i.jsx)(l.u,{as:a.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,i.jsx)(o.v.Items,{className:"z-10 origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,i.jsx)("div",{className:"py-1",children:(0,i.jsx)(o.v.Item,{children:function(e){e.active;return(0,i.jsxs)("div",{className:"grid grid-cols-4 gap-2 p-4",children:[(0,i.jsx)(D.CopyToClipboard,{text:s,onCopy:function(){return F.Am.info("Copied to clipboard! Share this document!")},children:(0,i.jsx)("button",{type:"button",className:"inline-flex items-center p-1 w-2/3 border border-transparent rounded-full shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:(0,i.jsx)(g.Z,{className:"h-5 w-5","aria-hidden":"true"})})}),(0,i.jsx)(T.Z,{subject:u,url:m,children:(0,i.jsx)(O.Z,{size:32,round:!0})}),(0,i.jsx)(P.Z,{url:m,quote:u,children:(0,i.jsx)(Z.Z,{size:32,round:!0})}),(0,i.jsx)(E.Z,{url:m,title:u,children:(0,i.jsx)(U.Z,{size:32,round:!0})}),(0,i.jsx)(_.Z,{url:m,title:u,children:(0,i.jsx)(L.Z,{size:32,round:!0})}),(0,i.jsx)($.Z,{url:m,title:u,separator:":: ",children:(0,i.jsx)(z.Z,{size:32,round:!0})})]})}})})})})]})},Se=function(){var e=(0,y.D3)(),n=e.user,t=e.logout,r="";r=window.location.origin;return(0,i.jsxs)(o.v,{as:"div",className:"relative inline-block text-left",children:[(0,i.jsx)("div",{children:(0,i.jsxs)(o.v.Button,{className:"flex items-center rounded-full bg-gray-100 text-gray-400 hover:text-gray-600",children:[(0,i.jsx)("span",{className:"sr-only",children:"Open options"}),n&&(0,i.jsx)("img",{className:"inline-block h-8 w-8 rounded-full",src:n.picture,alt:""})]})}),(0,i.jsx)(l.u,{as:a.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,i.jsx)(o.v.Items,{className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,i.jsxs)("div",{className:"py-1",children:[(0,i.jsxs)("div",{className:"flex flex-col items-center border-b border-b-2 border-gray-400 pb-2 ",children:[(0,i.jsx)("p",{className:"text-sm text-gray-700",children:"Logged in as:"}),(0,i.jsxs)("a",{href:"https://twitter.com/".concat(n.nickname),rel:"noreferrer",target:"_blank",className:"text-sm text-blue-500",children:["@",n.nickname]})]}),(0,i.jsx)(o.v.Item,{children:function(e){var n=e.active;return(0,i.jsx)("button",{type:"submit",onClick:function(){return function(e){return e.state,t({returnTo:r})}({state:"Identity"})},className:Fe(n?"bg-gray-100 text-gray-900":"text-gray-700","block w-full px-4 py-2 text-left text-sm text-center"),children:"Sign out"})}})]})})})]})},Ae=function(){var e=ke((0,b.KO)(A.lA),2)[1],n=(0,I.LU)().data,t=ke((0,b.KO)(S.UX),1)[0],r=ke((0,b.KO)(S._$),2)[1],o=(0,y.D3)(),l=o.user,c=o.isAuthenticated,d=o.getAccessTokenSilently,u=o.loginWithPopup,m=(0,I.hb)().mutate,f=(0,I.fL)().data,x=ke((0,se.t)(ee.bk),2),h=x[0],g=x[1],p=g.data;g.loading,g.error;(0,a.useEffect)((function(){(null===p||void 0===p?void 0:p.getDID)?r(null===p||void 0===p?void 0:p.getDID):r("")}),[p,r]),(0,a.useEffect)((function(){var t;(t=s().mark((function t(){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l){t.next=9;break}return t.next=3,d();case 3:return r=t.sent,e(r),t.next=7,m({key:"currentRegistryUser",value:JSON.stringify(l)});case 7:h({variables:{username:null===l||void 0===l?void 0:l.nickname,shortFormDid:null===n||void 0===n?void 0:n.id}}),(null===l||void 0===l?void 0:l.nickname)!==(null===f||void 0===f?void 0:f.nickname)&&v().then((function(){return console.log("Successfuly published did to the registery")})).catch((function(e){return console.error("Unable published did to the registery",e)}));case 9:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,s){var i=t.apply(e,n);function a(e){Ce(i,r,s,a,o,"next",e)}function o(e){Ce(i,r,s,a,o,"throw",e)}a(void 0)}))})()}),[d,l,e,h,v,null===f||void 0===f?void 0:f.nickname,m,null===n||void 0===n?void 0:n.id]);window.location.origin;var v=ke((0,ie.D)((0,ae.Ps)(re.a),{variables:{input:{longFormDid:t,shortFormDid:null===n||void 0===n?void 0:n.id,username:null===l||void 0===l?void 0:l.nickname,avatarUrl:null===l||void 0===l?void 0:l.picture,name:null===l||void 0===l?void 0:l.nickname,lastUpdated:(new Date).getTime(),profileType:"twitter"}},refetchQueries:[{query:ee.bk},"getDIDByTwitter"]}),1)[0];return(0,i.jsx)(i.Fragment,{children:c?(0,i.jsx)(Se,{}):(0,i.jsxs)("button",{type:"button",onClick:function(){return u()},className:"text-white bg-blue-400 hover:bg-blue-500 focus:ring-4 focus:outline-none focus:ring-blue-400/50 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center",children:[(0,i.jsx)("svg",{className:"mr-2 -ml-1 w-4 h-4","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"twitter",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,i.jsx)("path",{fill:"currentColor",d:"M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"})}),"Connect"]})})};function Te(e){var n=e.children,t=e.currentPage,r=(0,a.useState)(!1),s=r[0],o=r[1],d=(0,a.useState)(!1),u=d[0],m=d[1],f=(0,a.useState)(!1),x=f[0],h=f[1],y=(0,a.useState)(!1),w=y[0],A=y[1],T=(0,I.LU)().data,O=(0,Q.jK)().mutate,P=(0,V.r)().data,Z=ke((0,b.KO)(S.UX),1)[0],E=ke((0,b.KO)(K.w5),2)[1],U=(0,Q.ff)().data,_=(0,we.useRouter)(),L=function(e){return t===e},$=C()(ee.ge,ee.vd),z=function(e){var n=e.username,t=e.name,r=e.avatarUrl,s=e.longFormDid;if("Unknown"===(0,ee.Er)({shortFormDid:e.shortFormDid,contacts:U.data.contacts}).name)return(0,M.YH)(s).then((function(e){console.log(e),O({didDocument:JSON.parse(e.data.document),username:n,name:t,avatarUrl:r,myDid:T})})).catch((function(e){F.Am.error("Unable to parse DID. Check formatting and try again. Long Form DID expected."),console.log("Unable to parse DID while importing contact: ",e)}))},B=function(e){var n=e.shortFormDid,t=e.username,r=e.avatarUrl;E({did:n,name:t,metadata:JSON.stringify({avatar:(0,ee.nS)(),username:t,avatarUrl:r})}),_.push("/d/chat"),z(e)};return(0,i.jsxs)(i.Fragment,{children:[(null===P||void 0===P?void 0:P.data.lightningConfig.listening)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(je,{open:w,setOpen:A,setQuickSend:h}),(0,i.jsx)(Ne.Z,{open:x,setOpen:h,selectedContact:null})]}),(0,i.jsxs)("div",{className:"h-screen w-screen flex",children:[(0,i.jsx)("div",{className:"hidden w-28 bg-primary overflow-y-auto md:block",children:(0,i.jsxs)("div",{className:"w-full py-6 flex flex-col items-center h-full",children:[(0,i.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,i.jsx)("img",{src:"/imp-logo.svg",alt:"Impervious",height:"30",width:"30"})}),(0,i.jsxs)("div",{className:"flex-1 mt-6 w-full px-2 space-y-1",children:[De.map((function(e){return(0,i.jsx)(j.default,{href:e.href,passHref:!0,children:(0,i.jsxs)("a",{className:Fe(L(e.name)?"bg-violet-800 text-white":"text-indigo-100 hover:bg-primary-hover hover:text-white","group w-full p-3 rounded-md flex flex-col items-center text-xs font-medium"),"aria-current":e.current?"page":void 0,children:[(0,i.jsx)(e.icon,{className:Fe(L(e.name)?"text-white":"text-indigo-300 group-hover:text-white","h-6 w-6"),"aria-hidden":"true"}),(0,i.jsx)("span",{className:"mt-2",children:e.name})]})},e.name)})),(0,i.jsxs)("div",{className:Fe(w?"bg-violet-800 text-white":"text-indigo-100 hover:bg-primary-hover hover:text-white","group w-full p-3 rounded-md flex flex-col items-center text-xs font-medium"),onClick:function(){(null===P||void 0===P?void 0:P.data.lightningConfig.listening)?A(!w):F.Am.info("Connect to a lightning node to use this action.")},children:[(0,i.jsx)(ce.CNn,{className:Fe(w?"text-white":"text-indigo-300 group-hover:text-white","h-6 w-6"),"aria-hidden":"true"}),(0,i.jsx)("span",{className:"mt-2",children:"Wallet"})]})]}),(0,i.jsx)("div",{className:"self-end items-center flex flex-col w-full",children:(0,i.jsx)(J,{})})]})}),(0,i.jsx)(l.u.Root,{show:s,as:a.Fragment,children:(0,i.jsx)(c.V,{as:"div",className:"md:hidden",onClose:o,children:(0,i.jsxs)("div",{className:"fixed inset-0 z-40 flex",children:[(0,i.jsx)(l.u.Child,{as:a.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,i.jsx)(c.V.Overlay,{className:"fixed inset-0 bg-gray-600 bg-opacity-75"})}),(0,i.jsx)(l.u.Child,{as:a.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:(0,i.jsxs)("div",{className:"relative max-w-xs w-full bg-primary pt-5 pb-4 flex-1 flex flex-col",children:[(0,i.jsx)(l.u.Child,{as:a.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,i.jsx)("div",{className:"absolute top-1 right-0 -mr-14 p-1",children:(0,i.jsxs)("button",{type:"button",className:"h-12 w-12 rounded-full flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-white",onClick:function(){return o(!1)},children:[(0,i.jsx)(p.Z,{className:"h-6 w-6 text-white","aria-hidden":"true"}),(0,i.jsx)("span",{className:"sr-only",children:"Close sidebar"})]})})}),(0,i.jsx)("div",{className:"flex-shrink-0 px-4 flex items-center",children:(0,i.jsx)("img",{src:"/imp-logo.svg",alt:"Impervious",height:"30",width:"30"})}),(0,i.jsx)("div",{className:"mt-5 flex-1 h-0 px-2 overflow-y-auto",children:(0,i.jsx)("nav",{className:"h-full flex flex-col",children:(0,i.jsx)("div",{className:"space-y-1",children:De.map((function(e){return(0,i.jsxs)("a",{href:e.href,className:Fe(L(e.name)?"bg-violet-800 text-white":"text-indigo-100 hover:bg-primary-hover hover:text-white","group py-2 px-3 rounded-md flex items-center text-sm font-medium"),"aria-current":e.current?"page":void 0,children:[(0,i.jsx)(e.icon,{className:Fe(L(e.name)?"text-white":"text-indigo-300 group-hover:text-white","mr-3 h-6 w-6"),"aria-hidden":"true"}),(0,i.jsx)("span",{children:e.name})]},e.name)}))})})})]})}),(0,i.jsx)("div",{className:"flex-shrink-0 w-14","aria-hidden":"true"})]})})}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,i.jsx)(k.Z,{open:u,setOpen:m,existingContact:null}),(0,i.jsx)("header",{className:"w-full",children:(0,i.jsxs)("div",{className:"relative flex-shrink-0 h-16 bg-white border-b border-gray-200 shadow-sm flex",children:[(0,i.jsxs)("button",{type:"button",className:"border-r border-gray-200 px-4 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 md:hidden",onClick:function(){return o(!0)},children:[(0,i.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,i.jsx)(v.Z,{className:"h-6 w-6","aria-hidden":"true"})]}),(0,i.jsxs)("div",{className:"flex-1 flex justify-between px-4 sm:px-6 items-center",children:[(0,i.jsx)("div",{children:(0,i.jsx)("h2",{className:"font-semibold text-primary text-md pr-3",children:t})}),(0,i.jsx)("div",{className:"w-1/2",children:(0,i.jsx)(q,{placeholder:"Search for user via Twitter username or contact name",getSources:function(e){var n=e.query;return[{sourceId:ee.zv,getItems:function(){return(0,N.g)({searchClient:$,queries:[{indexName:ee.zv,query:n}]})},templates:{item:function(e){var n=e.item;return(0,i.jsx)(te,{item:n,importContact:z,goToMessage:B})}}}]}})}),(0,i.jsxs)("div",{className:"ml-2 flex items-center space-x-4 sm:ml-6 sm:space-x-6",children:[(0,i.jsx)(D.CopyToClipboard,{text:Z,onCopy:function(){return F.Am.info("Copied to clipboard! Share this document!")},children:(0,i.jsxs)("button",{type:"button",className:"ml-3 inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:order-0 sm:ml-0",children:[(0,i.jsx)(g.Z,{className:"h-5 w-5 mr-2","aria-hidden":"true"}),"Copy DID"]})}),(0,i.jsx)(Ie,{myDid:T}),(0,i.jsxs)("button",{type:"button",onClick:function(){return m(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary hover:bg-primary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 sm:ml-3",children:[(0,i.jsx)(le.Z,{className:"h-4 w-4 mr-1"})," Add"]}),(0,i.jsx)(Ae,{})]})]})]})}),(0,i.jsx)("div",{className:"flex-1 flex items-stretch overflow-hidden",children:(0,i.jsx)("main",{className:"flex-1 overflow-y-auto",children:n})})]})]})]})}},41854:function(e,n,t){t.d(n,{Z:function(){return m}});var r=t(85893),s=t(67294),i=t(11355),a=t(82546),o=t(5506),l=t(40782),c=t(6218),d=t(46249),u=t(20567);function m(e){var n=e.open,t=e.setOpen,m=e.existingContact,f=e.defaultName,x=e.defaultDid,h=(0,s.useState)(""),g=h[0],p=h[1],v=(0,s.useState)(""),y=v[0],b=v[1];(0,s.useEffect)((function(){x&&b(x)}),[x]),(0,s.useEffect)((function(){f&&p(f)}),[f]),(0,s.useEffect)((function(){m&&p(m.name)}),[m]);var j=function(){l.Am.success("Contact successfully deleted!")},N=function(e){l.Am.error("Failed to delete contact. Please try again."),console.log("Failed to delete contact. Error: ",e)},w=(0,d.LU)().data,C=(0,c.jK)().mutate,k=(0,c.jO)().mutate,D=(0,c.ZK)().mutate,F=function(){return y.split(/[\s]+/).find((function(e){return e.includes("did:")}))};return(0,r.jsx)(i.u.Root,{show:n,as:s.Fragment,children:(0,r.jsx)(a.V,{as:"div",className:"absolute fixed overflow-hidden z-10",onClose:t,children:(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,r.jsx)(a.V.Overlay,{className:"absolute inset-0"}),(0,r.jsx)("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10 sm:pl-16",children:(0,r.jsx)(i.u.Child,{as:s.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,r.jsx)("div",{className:"pointer-events-auto w-screen max-w-md",children:(0,r.jsxs)("form",{className:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl",children:[(0,r.jsxs)("div",{className:"h-0 flex-1 overflow-y-auto",children:[(0,r.jsxs)("div",{className:"bg-primary py-6 px-4 sm:px-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(a.V.Title,{className:"text-lg font-medium text-white",children:[" ","Add or Update Contact"," ",m&&"- ".concat(m.name)]}),(0,r.jsx)("div",{className:"ml-3 flex h-7 items-center",children:(0,r.jsxs)("button",{type:"button",className:"rounded-md bg-indigo-700 text-indigo-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white",onClick:function(){return t(!1)},children:[(0,r.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,r.jsx)(o.Z,{className:"h-6 w-6","aria-hidden":"true"})]})})]}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("p",{className:"text-sm text-indigo-300",children:"Add or update an existing contact in the form below."})})]}),(0,r.jsx)("div",{className:"flex flex-1 flex-col justify-between",children:(0,r.jsx)("div",{className:"divide-y divide-gray-200 px-4 sm:px-6",children:(0,r.jsxs)("div",{className:"space-y-6 pt-6 pb-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"project-name",className:"block text-md font-medium text-gray-900",children:[" ","Name"," "]}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{type:"text",name:"name",value:g,onChange:function(e){return p(e.target.value)},id:"name",className:"block w-full border rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-md font-medium text-gray-900",children:"Paste Contact/Long Form Did"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("textarea",{id:"didDocument",name:"didDocument",value:y,onChange:function(e){return b(e.target.value)},rows:4,className:"block w-full rounded-md border-2 border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})})]})]})})})]}),(0,r.jsxs)("div",{className:"flex flex-shrink-0 justify-end px-4 py-4",children:[m&&(0,r.jsx)("button",{type:"button",className:"rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-red-700 shadow-sm hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",onClick:function(){(0,l.Am)((function(e){var n=e.closeToast;return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"pb-4",children:"Delete this contact?"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:function(){m&&k(m.id,{onSuccess:j,onError:N}),n()},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Delete"}),(0,r.jsx)("button",{type:"button",onClick:n,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1})},children:"Delete"}),(0,r.jsx)("button",{type:"button",className:"ml-4 rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:function(){return t(!1)},children:"Cancel"}),(0,r.jsx)("button",{type:"submit",onClick:function(e){return function(e){if(e.preventDefault(),m)if(y){var n=F();if(!n)return void l.Am.error("Unable to parse DID. Check formatting and try again.");n.split("?")[0]===m.did?(D({name:g,existingContact:m,longFormDid:n||null}),t(!1)):l.Am.error("DID ID does not match this contact's ID. Please supply a correct DID or create a new contact for this DID.")}else D({name:g,existingContact:m});else{var r=F();r?g?(0,u.YH)(r).then((function(e){C({didDocument:JSON.parse(e.data.document),name:g,myDid:w}),t(!1)})).catch((function(e){l.Am.error("Unable to parse DID. Check formatting and try again. Long Form DID expected."),console.log(e)})):l.Am.error("Please provide a name or the contact and try again."):l.Am.error("Unable to parse DID. Check formatting and try again.")}}(e)},className:"ml-4 inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:m?"Update":"Add"})]})]})})})})]})})})}},85528:function(e,n,t){var r=t(85893),s=t(67294),i=t(6828);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){a(e,n,t[n])}))}return e}n.Z=function(e){var n=e.contact,t=e.className,a=(0,s.useState)(),l=a[0],c=a[1],d=(0,s.useState)(),u=d[0],m=d[1];return(0,s.useEffect)((function(){if(n){var e=JSON.parse(n.metadata),t=e.avatar,r=e.avatarUrl;c(t),m(r)}}),[n]),(0,r.jsx)(s.Fragment,{children:u?(0,r.jsx)("img",{className:"rounded-full ".concat(t),src:u}):l?(0,r.jsx)(i.nQ,o({className:t},l)):(0,r.jsx)(i.nQ,{className:t})})}},18426:function(e,n,t){t.d(n,{Z:function(){return D}});var r=t(85893),s=t(67294),i=t(35079),a=t(11355),o=t(82546),l=t(73933),c=t(5506),d=t(10822),u=t(61782),m=t(40782),f=t(91013),x=t(58057),h=t(63750),g=t(89583),p=t(61751),v=t(6218),y=t(85528),b=t(29017),j=t(51993),N=t.n(j),w=t(73210);function C(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter(Boolean).join(" ")}var k=function(e){var n=e.selected,t=e.setSelected,o=(0,s.useState)([]),l=o[0],c=o[1],d=(0,v.ff)().data;(0,s.useEffect)((function(){if(d){var e=null===d||void 0===d?void 0:d.data.contacts.filter((function(e){return-1!==JSON.parse(e.didDocument).service.findIndex((function(e){return e.serviceEndpoint.includes("lightning:")}))}));e.length&&c(e)}}),[d]);var u=function(e){return n===e};return(0,r.jsx)(i.R,{value:n,onChange:function(e){return t(e)},children:function(e){var t=e.open;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"mt-1 relative w-full",children:[(0,r.jsxs)(i.R.Button,{className:"relative w-full bg-white border border-gray-300 rounded-md shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("span",{className:"ml-3 block truncate",children:n?n.name:"Select Peer"})}),(0,r.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:(0,r.jsx)(f.Z,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),(0,r.jsx)(a.u,{show:t,as:s.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(i.R.Options,{className:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",children:l.map((function(e,n){return(0,r.jsx)(i.R.Option,{className:function(e){return C(e.active?"text-white bg-indigo-600":"text-gray-900","cursor-default select-none relative py-2 pl-3 pr-9")},value:e,children:function(n){n.selected;var t=n.active;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(y.Z,{contact:e,className:"h-4 w-4"}),(0,r.jsxs)("span",{className:C(u(e)?"font-semibold":"font-normal","ml-3 block truncate"),children:[e.name,(0,r.jsxs)("span",{className:"sr-only",children:[" ","is ","offline"]})]})]}),u(e)?(0,r.jsx)("span",{className:C(t?"text-white":"text-indigo-600","absolute inset-y-0 right-0 flex items-center pr-4"),children:(0,r.jsx)(x.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},n)}))})})]})})}})};function D(e){var n=e.open,t=e.setOpen,i=e.selectedContact,f=(0,s.useState)(""),x=f[0],v=f[1],y=(0,s.useState)(100),j=y[0],D=y[1],F=(0,s.useState)(""),I=F[0],S=F[1],A=(0,s.useState)(!1),T=A[0],O=A[1],P=(0,p.$3)().mutate,Z=(0,b.Pn)().data,E=(0,w.p)().data,U=function(){m.Am.error("Error sending message. Please try again.")};(0,s.useEffect)((function(){i&&v(i)}),[i]);var _=function(){(0,m.Am)((function(e){var n=e.closeToast;return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"pb-4",children:"Send these sats to this user?"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:function(){P({msg:I,did:x.did,type:"https://didcomm.org/basicmessage/2.0/message",amount:parseInt(j),reply_to_id:"",isPayment:!0,settings:E}),S(""),m.Am.success("You've just sent sats!"),n()},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Confirm"}),(0,r.jsx)("button",{type:"button",onClick:n,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1})};return(0,r.jsx)(a.u.Root,{show:n,as:s.Fragment,children:(0,r.jsx)(o.V,{as:"div",className:"absolute fixed overflow-hidden z-10",onClose:t,children:(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,r.jsx)(o.V.Overlay,{className:"absolute inset-0"}),(0,r.jsx)("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10 sm:pl-16",children:(0,r.jsx)(a.u.Child,{as:s.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,r.jsx)("div",{className:"pointer-events-auto w-screen max-w-md",children:(0,r.jsxs)("form",{className:"flex h-full flex-col divide-y divide-gray-200 bg-white shadow-xl",children:[(0,r.jsxs)("div",{className:"h-0 flex-1 overflow-y-auto",children:[(0,r.jsxs)("div",{className:"bg-primary py-6 px-4 sm:px-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(o.V.Title,{className:"text-lg font-medium text-white inline-flex items-center",children:["Quick Send"," ",(0,r.jsx)(g.eJs,{className:"w-5 h-5 ml-1 mb-0.5"})]}),(0,r.jsx)("div",{className:"ml-3 flex h-7 items-center",children:(0,r.jsxs)("button",{type:"button",className:"rounded-md bg-indigo-700 text-indigo-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white",onClick:function(){return t(!1)},children:[(0,r.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,r.jsx)(c.Z,{className:"h-6 w-6","aria-hidden":"true"})]})})]}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("p",{className:"text-sm text-indigo-300",children:"Instantly send sats to anyone via the Lightning Network."})}),(0,r.jsxs)("div",{className:"mt-1",children:[(0,r.jsx)("p",{className:"text-indigo-300 text-md",children:"Your Balance"}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("p",{className:"text-lg font-bold text-white",children:[Number(Z).toLocaleString()," Sats (",Z&&N().toBitcoin(Z)," ","BTC)"]}),(0,r.jsx)("span",{children:(0,r.jsx)(g.eJs,{className:"ml-2 h-5 w-5 text-white"})})]})]})]}),(0,r.jsx)("div",{className:"flex flex-1 flex-col justify-between",children:(0,r.jsx)("div",{className:"divide-y divide-gray-200 px-4 sm:px-6",children:(0,r.jsxs)("div",{className:"space-y-6 pt-6 pb-5",children:[(0,r.jsxs)("label",{htmlFor:"sats",className:"block text-sm font-medium text-gray-900",children:[" ","Select Contact"," "]}),(0,r.jsx)(k,{selected:x,setSelected:v}),(0,r.jsxs)("div",{className:"pt-2",children:[(0,r.jsxs)("label",{htmlFor:"sats",className:"block text-sm font-medium text-gray-900",children:[" ","Amount (Satoshis)"," "]}),(0,r.jsxs)("div",{className:"mt-1 flex",children:[(0,r.jsx)("input",{type:"number",name:"name",value:j,onChange:function(e){return function(n){if(""!==n)try{(n=parseInt(n))>0&&D(n)}catch(e){console.log("Invalid input: ",e)}else D()}(e.target.value)},id:"name",className:"block w-full rounded-md border border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"}),(0,r.jsxs)("div",{className:"flex pl-4 space-x-2",children:[(0,r.jsx)("button",{type:"button",onClick:function(){return D(j+100)},className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-primary hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:(0,r.jsx)(d.Z,{className:"h-3 w-3","aria-hidden":"true"})}),(0,r.jsx)("button",{type:"button",onClick:function(){j>=100?D(j-100):j<100&&j>0&&D(0)},className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-primary hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:(0,r.jsx)(u.Z,{className:"h-3 w-3","aria-hidden":"true"})})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"sats",className:"block text-sm font-medium text-gray-900 pb-4",children:[" ","Add a Message"," "]}),(0,r.jsx)("textarea",{id:"message",name:"message",onChange:function(e){return S(e.target.value)},rows:4,className:"block w-full rounded-md border border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]})]})})})]}),(0,r.jsx)("div",{className:"px-8 py-4",children:(0,r.jsxs)(l.r.Group,{as:"div",className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"flex-grow flex flex-col",children:[(0,r.jsx)(l.r.Label,{as:"span",className:"text-sm font-medium text-gray-900",passive:!0,children:"Quick Send"}),(0,r.jsx)(l.r.Description,{as:"span",className:"text-sm text-gray-500",children:"Enable one-click lightning payments!"})]}),(0,r.jsx)(l.r,{checked:T,onChange:O,className:C(T?"bg-indigo-600":"bg-gray-200","relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),children:(0,r.jsx)("span",{"aria-hidden":"true",className:C(T?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200")})})]})}),(0,r.jsx)("div",{className:"flex flex-shrink-0 justify-end px-4 py-4",children:(0,r.jsxs)("button",{type:"button",className:"w-full inline-flex text-center justify-center ml-4 rounded-md border border-gray-300 bg-primary py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:function(){Z<j?m.Am.error("Insufficient funds."):T?(P({msg:I,did:x.did,type:"https://didcomm.org/basicmessage/2.0/message",amount:parseInt(j),reply_to_id:"",isPayment:!0,settings:E},{onError:U}),m.Am.success("You've just sent sats!")):_()},children:["Send Bitcoin"," ",(0,r.jsx)(h.XLv,{className:"w-4 h-4 ml-1 mt-0.5"})]})})]})})})})]})})})}},29017:function(e,n,t){t.d(n,{lQ:function(){return u},Pn:function(){return f},_C:function(){return x},Sx:function(){return h},Kl:function(){return m}});var r=t(88767),s=t(49695),i=t(47193),a=function(e){var n=e.amount,t=e.memo;return(0,s.W)({url:"/v1/lightning/generateinvoice",method:"post",data:{amount:n,memo:t},headers:{"Grpc-Metadata-X-API-KEY":"".concat((0,i.P)())}})},o=function(e){var n=e.invoice;return(0,s.W)({url:"/v1/lightning/payinvoice",method:"post",data:{invoice:n},headers:{"Grpc-Metadata-X-API-KEY":"".concat((0,i.P)())}})},l=function(){return(0,s.W)({url:"/v1/lightning/getchannels",method:"post",data:{},headers:{"Grpc-Metadata-X-API-KEY":"".concat((0,i.P)())}})},c=function(){return(0,s.W)({url:"/v1/lightning/listinvoices",method:"post",data:{},headers:{"Grpc-Metadata-X-API-KEY":"".concat((0,i.P)())}})},d=function(){return(0,s.W)({url:"/v1/lightning/listpayments",method:"post",data:{},headers:{"Grpc-Metadata-X-API-KEY":"".concat((0,i.P)())}})},u=function(){var e=(0,r.useQueryClient)();return(0,r.useMutation)(a,{onSuccess:function(){console.log("Invoice successfully generated."),e.invalidateQueries("fetch-invoices")},onError:function(e){return console.log("Error generating invoice: "+e)}})},m=function(){var e=(0,r.useQueryClient)();return(0,r.useMutation)(o,{onSuccess:function(){console.log("Invoice successfully paid."),e.invalidateQueries("fetch-channels-balance"),e.invalidateQueries("fetch-payments")},onError:function(e){return console.log("Error paying invoice: "+e)}})},f=function(e,n){return(0,r.useQuery)("fetch-channels-balance",l,{onSuccess:e,onError:function(e){console.log("Unable to fetch channel balance: ",e)},select:function(e){if(e.data)return e.data.amt}})},x=function(e,n){return(0,r.useQuery)("fetch-invoices",c,{onSuccess:e,onError:function(e){console.log("Unable to fetch invoices: ",e)},select:function(e){if(e.data)return e.data.invoices}})},h=function(e,n){return(0,r.useQuery)("fetch-payments",d,{onSuccess:e,onError:function(e){console.log("Unable to fetch payments: ",e)},select:function(e){if(e.data)return e.data.payments}})}},60949:function(e,n,t){t.d(n,{a:function(){return r},JZ:function(){return s},gL:function(){return i}});var r="\n  mutation CreateDID(\n    $input: CreateDIDInput!\n    $condition: ModelDIDConditionInput\n  ) {\n    createDID(input: $input, condition: $condition) {\n      shortFormDid\n      username\n      longFormDid\n      avatarUrl\n      lastUpdated\n      name\n      email\n      profileType\n      createdAt\n      updatedAt\n    }\n  }\n",s="\n  mutation UpdateDID(\n    $input: UpdateDIDInput!\n    $condition: ModelDIDConditionInput\n  ) {\n    updateDID(input: $input, condition: $condition) {\n      shortFormDid\n      username\n      longFormDid\n      avatarUrl\n      lastUpdated\n      name\n      email\n      profileType\n      createdAt\n      updatedAt\n    }\n  }\n",i="\n  mutation DeleteDID(\n    $input: DeleteDIDInput!\n    $condition: ModelDIDConditionInput\n  ) {\n    deleteDID(input: $input, condition: $condition) {\n      shortFormDid\n      username\n      longFormDid\n      avatarUrl\n      lastUpdated\n      name\n      email\n      profileType\n      createdAt\n      updatedAt\n    }\n  }\n"},96787:function(e,n,t){t.d(n,{Dm:function(){return s},UX:function(){return i},_$:function(){return a}});var r=t(91131),s=(0,r.cn)(),i=(0,r.cn)(),a=(0,r.cn)("");(0,r.cn)("currentRegisteryUser","")}}]);