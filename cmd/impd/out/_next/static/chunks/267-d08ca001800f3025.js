"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[267],{46215:function(e,t,n){var s=n(85893),r=n(67294),a=n(6828),i=n(71722),c=n(24796),l=n(6218),o=n(46249),d=n(85528);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){m(e,t,n[t])}))}return e}t.Z=function(e){var t=e.contact,n=(0,r.useState)(!1),m=n[0],u=n[1],f=(0,r.useState)({}),h=f[0],g=f[1],p=(0,l.ZK)(b,y).mutate,v=(0,o.nk)().mutate,j=(0,o.OX)().data,b=function(){return toast.success("Avatar saved!")},y=function(){return toast.error("Error saving avatar. Please try again later.")};(0,r.useEffect)((function(){g(t?JSON.parse(t.metadata).avatar:j?JSON.parse(j):x({},(0,c.nS)()))}),[t,j]);var N=function(){return(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(a.nQ,x({},h,{className:"h-32 w-full object-cover lg:h-48"})),(0,s.jsx)("button",{type:"button",onClick:function(){return u(!0),void g(x({},(0,c.nS)()))},className:"pt-2",children:(0,s.jsx)(i.Z,{className:"-ml-1 mr-2 h-6 w-6 text-gray-900","aria-hidden":"true"})}),m&&(0,s.jsxs)("div",{className:"flex space-x-2 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:function(){return u(!1),void g(j)},className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:function(){return t?p({existingContact:t,avatar:h}):v({key:"myAvatar",value:JSON.stringify(h)}),void u(!1)},className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Save"})]})]})};return t?(0,s.jsx)(s.Fragment,{children:JSON.parse(t.metadata).username?(0,s.jsx)(d.Z,{contact:t,className:"h-32 object-cover lg:h-48 pt-5"}):(0,s.jsx)(N,{})}):(0,s.jsx)(N,{})}},84152:function(e,t,n){var s=n(85893),r=n(56141),a=n(19965),i=n(67294),c=n(6218);t.Z=function(e){var t=e.did,n=e.asMenuItem,l=(0,i.useState)(!1),o=l[0],d=l[1],m=(0,c.JA)().data,x=(0,c.ir)().mutate;(0,i.useEffect)((function(){m&&d(null===m||void 0===m?void 0:m.includes(t))}),[m,t]);var u=function(){var e=m;e||(e=[]),e.push(t),x({key:"blocklist",value:JSON.stringify(e)})},f=function(){var e=m.filter((function(e){return e!==t}));x({key:"blocklist",value:JSON.stringify(e)})};return(0,s.jsx)(s.Fragment,{children:n?(0,s.jsx)(s.Fragment,{children:o?(0,s.jsx)("div",{className:"w-full flex items-center ml-2",onClick:function(){return f()},children:(0,s.jsx)("p",{className:"text-gray-900 px-2 py-2 text-sm",children:"Unlock"})}):(0,s.jsx)("div",{className:"w-full flex items-center ml-2",onClick:function(){return u()},children:(0,s.jsx)("p",{className:"text-red-700 px-2 py-2 text-sm",children:"Block"})})}):(0,s.jsx)(s.Fragment,{children:o?(0,s.jsxs)("button",{type:"button",onClick:function(){return f()},className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[(0,s.jsx)(r.Z,{className:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),"Unblock"]}):(0,s.jsxs)("button",{type:"button",onClick:function(){return u()},className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[(0,s.jsx)(a.Z,{className:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),"Block"]})})})}},10267:function(e,t,n){n.r(t),n.d(t,{ContactView:function(){return S},default:function(){return O}});var s=n(85893),r=n(67294),a=n(69065),i=n(33772),c=n(14898),l=n(33740),o=n(94323),d=n(40782),m=n(74855),x=n(41854),u=n(6218),f=n(60758),h=n(85528);var g=function(e){var t=e.contact,n=e.className,r=JSON.parse(t.metadata).username;return(0,s.jsxs)(s.Fragment,{children:[r&&(0,s.jsxs)("a",{className:n,target:"_blank",rel:"noreferrer",href:"https://twitter.com/".concat(r),children:["@",r]})," "]})};var p=function(e){var t=e.contact,n=e.className,r=JSON.parse(t.metadata).username;return(0,s.jsxs)(s.Fragment,{children:[r&&(0,s.jsx)("svg",{className:n,"aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"twitter",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,s.jsx)("path",{fill:"#1D9BF0",d:"M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"})})," "]})},v=n(46215),j=n(84152),b=n(61751),y=n(46249),N=n(20567),w=n(73210),C=[{name:"Contact Info",href:"#",current:!0}];function k(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var S=function(e){var t=e.selectedContact,n=e.setOpenAddContactForm,a=e.setSelectedContact,o=(0,r.useState)(!1),f=o[0],h=o[1],p=(0,r.useState)(),S=p[0],O=p[1],Z=(0,u.jO)().mutate,A=(0,u.ff)().data,D=(0,y.LU)().data,F=(0,u.JA)().data,J=(0,w.p)().data,E=(0,b.mA)({myDid:D,contacts:null===A||void 0===A?void 0:A.data.contacts,blocklist:F,settings:J}).data,P=function(){d.Am.success("Contact successfully deleted!"),a&&a("")},U=function(e){d.Am.error("Failed to delete contact. Please try again."),console.log("Failed to delete contact. Error: ",e)};return(0,s.jsxs)("article",{children:[(0,s.jsx)(x.Z,{open:f,setOpen:h,existingContact:null,defaultDid:S}),(0,s.jsxs)("div",{children:["Unknown"===(null===t||void 0===t?void 0:t.name)&&(0,s.jsx)("div",{className:"rounded-md bg-green-50 p-4",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(i.Z,{className:"h-5 w-5 text-green-400","aria-hidden":"true"})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"Unknown contact"}),(0,s.jsx)("div",{className:"mt-2 text-sm text-green-700",children:(0,s.jsx)("p",{children:"You do not have this contact saved and is unknown. Do you want to save this contact?"})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("div",{className:"-mx-2 -my-1.5 flex",children:(0,s.jsx)("button",{type:"button",onClick:function(){return function(){var e=E.conversations.find((function(e){return e.messages.find((function(e){return(0,N.Ho)(e.data.from)===t.did}))}));if(e){var n=e.messages.find((function(e){return(0,N.Ho)(e.data.from)===t.did})).data.from;n&&(O(n),h(!0))}}()},className:"rounded-md bg-green-50 px-2 py-1.5 text-sm font-medium text-green-800 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-green-600 focus:ring-offset-2 focus:ring-offset-green-50",children:"Save Contact"})})})]})]})}),(0,s.jsx)("div",{className:"pb-12 flex flex-col items-center mt-8 ",children:(0,s.jsx)(v.Z,{contact:t})}),(0,s.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsx)("div",{className:"-mt-12 sm:-mt-16 sm:flex sm:items-end sm:space-x-5",children:(0,s.jsx)("div",{className:"mt-6 sm:flex-1 sm:min-w-0 sm:flex sm:items-center sm:justify-end sm:space-x-6 sm:pb-1 flex flex-col",children:(0,s.jsx)("div",{className:"sm:hidden 2xl:block mt-6 min-w-0 flex-1",children:(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 truncate",children:null===t||void 0===t?void 0:t.name})})})}),(0,s.jsx)("div",{className:"hidden sm:block 2xl:hidden mt-6 min-w-0 flex-1",children:(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 truncate",children:null===t||void 0===t?void 0:t.name})})]})]}),(0,s.jsx)("div",{className:"mt-6 sm:mt-2 2xl:mt-5",children:(0,s.jsx)("div",{className:"border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:C.map((function(e){return(0,s.jsx)("a",{href:e.href,className:k(e.current?"border-pink-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"),"aria-current":e.current?"page":void 0,children:e.name},e.name)}))})})})}),(0,s.jsx)("div",{className:"mt-6 max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"sm:col-span-1",children:[(0,s.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Name"}),(0,s.jsx)(m.CopyToClipboard,{text:t.name,onCopy:function(){return d.Am.info("Copied!")},children:(0,s.jsx)("dd",{className:"mt-1 text-sm text-gray-900 hover:bg-gray-50",children:t.name})})]}),(0,s.jsxs)("div",{className:"sm:col-span-1",children:[(0,s.jsx)("dt",{className:"text-xs font-medium text-gray-500",children:"DID"}),(0,s.jsx)(m.CopyToClipboard,{text:t.did,onCopy:function(){return d.Am.info("Copied!")},children:(0,s.jsx)("dd",{className:"mt-1 text-xs text-gray-900 hover:bg-gray-50",children:t.did})})]}),JSON.parse(t.metadata).username&&(0,s.jsxs)("div",{className:"sm:col-span-1",children:[(0,s.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Twitter"}),(0,s.jsx)("dd",{className:"mt-1 text-sm text-gray-900 hover:bg-gray-50",children:(0,s.jsx)(g,{contact:t,className:"text-blue-500 font-medium"})})]}),(0,s.jsx)("br",{})]})}),(0,s.jsx)("div",{className:"relative pb-8",children:(0,s.jsx)("div",{className:"absolute inset-0 flex items-center pt-6","aria-hidden":"true",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300"})})}),(0,s.jsxs)("div",{className:"pt-4 pl-16 flex space-x-4",children:[(0,s.jsx)(j.Z,{did:t.did}),"Unknown"!==(null===t||void 0===t?void 0:t.name)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{type:"button",onClick:function(){return n(!0)},className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[(0,s.jsx)(c.Z,{className:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),"Edit"]}),(0,s.jsxs)("button",{type:"button",onClick:function(){return e=t,void(0,d.Am)((function(t){var n=t.closeToast;return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"pb-4",children:"Delete this contact?"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{type:"button",onClick:function(){Z(e.id,{onSuccess:P,onError:U}),n()},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Delete"}),(0,s.jsx)("button",{type:"button",onClick:n,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1});var e},className:"inline-flex items-center px-2.5 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[(0,s.jsx)(l.Z,{className:"-ml-1 mr-2 h-5 w-5 text-red-400","aria-hidden":"true"}),"Delete"]})]})]})]})};function O(){var e=(0,r.useState)(!1),t=(e[0],e[1]),n=(0,r.useState)([]),i=n[0],c=n[1],l=(0,r.useState)(""),d=l[0],m=l[1],g=(0,r.useState)(!1),v=g[0],j=g[1],b=(0,u.ff)().data;return(0,r.useEffect)((function(){if(b){var e="abcdefghijklmnopqrstuvwxyz1234567890".split("").map((function(e){return b.data.contacts.filter((function(t){return t.name[0].toLowerCase()===e.toLowerCase()}))})).filter((function(e){return e.length>0}));c(e)}}),[b]),(0,s.jsx)(f.Z,{currentPage:"Contacts",children:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"h-full flex z-0",children:[(0,s.jsx)(x.Z,{open:v,setOpen:j,existingContact:d}),(0,s.jsxs)("div",{className:"flex flex-col min-w-0 flex-1 overflow-hidden",children:[(0,s.jsx)("div",{className:"lg:hidden",children:(0,s.jsx)("div",{className:"flex items-center justify-between bg-gray-50 border-b border-gray-200 px-4 py-1.5",children:(0,s.jsx)("div",{children:(0,s.jsxs)("button",{type:"button",className:"-mr-3 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary",onClick:function(){return t(!0)},children:[(0,s.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,s.jsx)(a.Z,{className:"h-6 w-6","aria-hidden":"true"})]})})})}),(0,s.jsxs)("div",{className:"flex-1 relative z-0 flex overflow-hidden",children:[(0,s.jsxs)("main",{className:"flex-1 relative z-0 overflow-y-auto focus:outline-none xl:order-last",children:[(0,s.jsx)("nav",{className:"flex items-start px-4 py-3 sm:px-6 lg:px-8 xl:hidden","aria-label":"Breadcrumb",children:(0,s.jsxs)("a",{href:"#",className:"inline-flex items-center space-x-3 text-sm font-medium text-gray-900",children:[(0,s.jsx)(o.Z,{className:"-ml-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),(0,s.jsx)("span",{children:"Directory"})]})}),d&&(0,s.jsx)(S,{selectedContact:d,setOpenAddContactForm:j,setSelectedContact:m})]}),(0,s.jsxs)("aside",{className:"hidden xl:order-first xl:flex xl:flex-col flex-shrink-0 w-80 border-r border-gray-200",children:[(0,s.jsxs)("div",{className:"px-6 pt-6 pb-4",children:[(0,s.jsxs)("h2",{className:"text-lg font-medium text-gray-900",children:["Directory (",null===b||void 0===b?void 0:b.data.contacts.length,")"]}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Search contacts below"})]}),(0,s.jsx)("nav",{className:"flex-1 min-h-0 overflow-y-auto","aria-label":"Directory",children:i&&i.map((function(e,t){return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"sticky top-0 border-t border-b border-gray-200 bg-gray-50 px-6 py-1 text-sm font-medium text-gray-500",children:(0,s.jsx)("h3",{children:e[0].name[0].toUpperCase()})}),(0,s.jsx)("ul",{role:"list",className:"relative divide-y divide-gray-200",children:e.map((function(e,t){return(0,s.jsx)("li",{onClick:function(){return m(e)},children:(0,s.jsxs)("div",{className:"relative px-6 py-5 flex items-center space-x-3 hover:bg-gray-50 focus-within:ring-2 focus-within:ring-inset focus-within:ring-primary",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(h.Z,{contact:e,className:"h-10 w-10"})}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsxs)("div",{className:"focus:outline-none",children:[(0,s.jsx)("span",{className:"absolute inset-0","aria-hidden":"true"}),(0,s.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)(p,{contact:e,className:"h-4 w-4"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 truncate",children:e.did})]})})]})},t)}))})]},t)}))})]})]})]})]})})})}}}]);