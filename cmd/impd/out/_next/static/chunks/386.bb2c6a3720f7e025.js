!function(){function n(n){return function(n){if(Array.isArray(n)){for(var e=0,r=new Array(n.length);e<n.length;e++)r[e]=n[e];return r}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var e=[];self.addEventListener("message",(function(r){var t=r.data,o=t.name,i=t.type,a=t.id,f=t.action,l=t.chunk;if(f){if("download"===f){console.log("prepping file for download: ",a);var c=e.find((function(n){return n.id===a}));if(!c)return void console.log("File is unavailable for download: ",a);var u=new Blob(c.chunks),d=new File([u],o,{type:i});self.postMessage(d)}"abort"===f&&(console.log("abording file transfer"),e=[])}else{var s=e.find((function(n){return n.id===a}));if(s)return s.chunks.push(l),void(e=e.map((function(n){return n.id===s.id?s:n})));e=n(e).concat([{name:o,type:i,id:a,chunks:[l]}])}})),_N_E={}}();