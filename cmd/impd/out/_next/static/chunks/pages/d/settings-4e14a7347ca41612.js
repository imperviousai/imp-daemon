(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[705],{3402:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/d/settings",function(){return n(20583)}])},46215:function(e,t,n){"use strict";var r=n(85893),o=n(67294),i=n(91131),s=n(6828),a=n(71722),l=n(31806),c=n(24796),d=n(6218),u=n(85528);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.Z=function(e){var t=e.contact,n=(0,o.useState)(!1),m=n[0],f=n[1],h=(0,o.useState)({}),p=h[0],b=h[1],y=g((0,i.KO)(l.o),2),v=y[0],j=y[1],w=(0,d.ZK)(N,C).mutate,N=function(){return toast.success("Avatar saved!")},C=function(){return toast.error("Error saving avatar. Please try again later.")};(0,o.useEffect)((function(){b(t?JSON.parse(t.metadata).avatar:v)}),[t,v]);var k=function(){return(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)(s.nQ,x({},p,{className:"h-32 w-full object-cover lg:h-48"})),(0,r.jsx)("button",{type:"button",onClick:function(){return f(!0),void b(x({},(0,c.nS)()))},className:"pt-2",children:(0,r.jsx)(a.Z,{className:"-ml-1 mr-2 h-6 w-6 text-gray-900","aria-hidden":"true"})}),m&&(0,r.jsxs)("div",{className:"flex space-x-2 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:function(){return f(!1),void b(v)},className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),(0,r.jsx)("button",{type:"button",onClick:function(){return t?w({existingContact:t,avatar:p}):j(p),void f(!1)},className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Save"})]})]})};return t?(0,r.jsx)(r.Fragment,{children:JSON.parse(t.metadata).twitterUsername?(0,r.jsx)(u.Z,{contact:t,className:"h-32 object-cover lg:h-48 pt-5"}):(0,r.jsx)(k,{})}):(0,r.jsx)(k,{})}},85528:function(e,t,n){"use strict";var r=n(85893),o=n(67294),i=n(6828);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}t.Z=function(e){var t=e.contact,n=e.className,s=(0,o.useState)(),l=s[0],c=s[1],d=(0,o.useState)(),u=d[0],m=d[1];return(0,o.useEffect)((function(){if(t){var e=JSON.parse(t.metadata),n=e.avatar,r=e.avatarUrl;c(n),m(r)}}),[t]),(0,r.jsx)(o.Fragment,{children:u?(0,r.jsx)("img",{className:"rounded-full ".concat(n),src:u,alt:"avatar"}):l?(0,r.jsx)(i.nQ,a({className:n},l)):(0,r.jsx)(i.nQ,{className:n})})}},20583:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ne}});var r=n(85893),o=n(67294),i=n(77082),s=n(24634),a=n(94323),l=n(11240),c=n(30381),d=n.n(c),u=n(74855),m=n(40782),x=n(44156),g=n(35666),f=n.n(g),h=n(9669),p=n.n(h),b=n(81354),y=n.n(b),v=n(48764).Buffer;function j(e,t,n,r,o,i,s){try{var a=e[i](s),l=a.value}catch(c){return void n(c)}a.done?t(l):Promise.resolve(l).then(r,o)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){j(i,r,o,s,a,"next",e)}function a(e){j(i,r,o,s,a,"throw",e)}s(void 0)}))}}var N=w(f().mark((function e(t,n,r){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(w(f().mark((function e(o,i){var s,a,l,c,d,u,m,x,g,h,p,b,j,w,N,k,D,S,I;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Creating your node...",n),s={"X-VOLTAGE-AUTH":t,"Access-Control-Allow-Origin":"true"},c={network:"testnet",purchased_type:"ondemand",type:"standard",name:n,settings:{alias:n,autocompaction:!1,autopilot:!1,color:"#EF820D",grpc:!0,keysend:!0,rest:!0,whitelist:["1.2.3.4"],wumbo:!0}},e.next=8,C("POST","https://api.voltage.cloud/node/create",c,s);case 8:d=e.sent,u=d.node_id,m=d.api_endpoint,console.log("Created the node: "+u);case 12:return x={node_id:u},e.next=15,C("POST","https://api.voltage.cloud/node",x,s);case 15:return g=e.sent,l=g.status,a=g.api_endpoint,console.log("Found node's status of "+l),e.next=21,new Promise((function(e){return setTimeout(e,5e3)}));case 21:if("waiting_init"!==l){e.next=12;break}case 22:return e.next=24,C("GET","https://"+a+":8080/v1/genseed",{},{});case 24:return d=e.sent,h=d.cipher_seed_mnemonic,console.log("Got seed phrase: "+h),console.log("Initializing wallet with password: "+r),p={wallet_password:v.from(r).toString("base64"),cipher_seed_mnemonic:h,stateless_init:!0},e.next=31,C("POST","https://"+a+":8080/v1/initwallet",p,{});case 31:return d=e.sent,b=d.admin_macaroon,console.log("Got Node's Macaroon: "+b),j=y().AES.encrypt(v.from(h.join(",")).toString("base64"),r).toString(),w=y().AES.encrypt(b,r).toString(),N={node_id:u,macaroon:w,name:"admin"},e.next=39,C("POST","https://api.voltage.cloud/node/macaroon",N,s);case 39:return d=e.sent,console.log("Uploaded macaroon"),k={node_id:u,seed:j},e.next=44,C("POST","https://api.voltage.cloud/node/upload_seed",k,s);case 44:return d=e.sent,console.log("Uploaded seed"),console.log("Successfully created your node!"),D=y().enc.Base64.parse(b).toString(y().enc.Hex),console.log("Grabbing the TLS cert for newly created node."),S={node_id:u},e.next=52,C("POST","https://api.voltage.cloud/node/cert",S,s);case 52:d=e.sent,I=y().enc.Base64.parse(d.tls_cert).toString(y().enc.Hex),o({nodeName:n,apiEndpoint:m,hexMacaroon:D,tlsCert:I}),e.next=61;break;case 57:e.prev=57,e.t0=e.catch(0),console.log("Unable to create your node: ",e.t0),i(e.t0);case 61:case"end":return e.stop()}}),e,null,[[0,57]])})))));case 1:case"end":return e.stop()}}),e)}))),C=function(e,t,n,r){return new Promise((function(o,i){p()({method:e,url:t,headers:r,data:n}).then((function(e){var t=e.data;o(t)})).catch((function(e){console.log(e),i(e)}))}))},k=n(58057),D=n(68163),S=n(33772),I=n(56727),P=n(91013),A=n(63205);function T(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var U=function(e){var t=e.selected,n=e.setSelected;return(0,r.jsx)(I.Ri,{value:t,onChange:n,children:function(e){var n=e.open;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.Ri.Label,{className:"block text-sm font-medium text-gray-700",children:"Select Your Relay"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsxs)(I.Ri.Button,{className:"relative w-full bg-white border border-gray-300 rounded-md shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,r.jsx)("span",{className:"block truncate",children:t}),(0,r.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:(0,r.jsx)(P.Z,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),(0,r.jsx)(I.uT,{show:n,as:o.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(I.Ri.Options,{className:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",children:A.Q8.map((function(e,t){return(0,r.jsx)(I.Ri.Option,{className:function(e){return T(e.active?"text-white bg-primary":"text-gray-900","cursor-default select-none relative py-2 pl-8 pr-4")},value:e,children:function(t){var n=t.selected,o=t.active;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:T(n?"font-semibold":"font-normal","block truncate"),children:e}),n?(0,r.jsx)("span",{className:T(o?"text-white":"text-indigo-600","absolute inset-y-0 left-0 flex items-center pl-1.5"),children:(0,r.jsx)(k.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},t)}))})})]})]})}})},F=n(46249),O=n(96787),L=n(91131),E=n(37328);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var M=function(){var e=(0,x.r)().data,t=(0,F.LU)().data,n=(0,x.V)().mutate,i=(0,F.d3)().mutate,s=_((0,L.KO)(O.D),1)[0],a=(0,o.useState)(""),l=a[0],c=a[1],g=(0,o.useState)(""),f=g[0],h=g[1],p=(0,o.useState)(""),b=p[0],y=p[1],v=(0,o.useState)(!1),j=v[0],w=v[1],C=(0,o.useState)(A.Q8[0]),I=C[0],P=C[1],T=(0,o.useState)(!1),M=T[0],R=T[1],H=(0,o.useState)(""),V=H[0],Z=H[1],z=(0,o.useState)(""),$=z[0],B=z[1],K=(0,o.useState)(""),Q=K[0],G=K[1],Y=(0,o.useState)(!1),J=Y[0],q=Y[1],X=(0,o.useState)(!1),W=X[0],ee=X[1],te=(0,o.useState)(!1),ne=te[0],re=te[1],oe=(0,o.useState)(""),ie=oe[0],se=oe[1],ae=(0,o.useState)(""),le=ae[0],ce=ae[1],de=(0,o.useState)(""),ue=de[0],me=de[1],xe=(0,o.useState)(""),ge=xe[0],fe=xe[1],he=(0,o.useState)(""),pe=he[0],be=he[1],ye=(0,o.useState)(""),ve=ye[0],je=ye[1],we=(0,o.useState)(""),Ne=we[0],Ce=we[1],ke=(0,o.useState)(!0),De=ke[0],Se=ke[1],Ie=(0,o.useState)(!0),Pe=Ie[0],Ae=Ie[1],Te=function(){ee(!1),re(!1),h(""),c(""),y(""),G("")},Ue=function(){return ie&&le&&ue&&(pe||Ne)&&(ge||ve)},Fe=function(){console.log("Updating lightning configuration ..."),Ue?(n({config:{ip:ie,port:le,pubkey:ue,tlsCert:De?pe:"",tlsCertHex:De?"":Ne,adminMacaroon:Pe?ge:"",adminMacaroonHex:Pe?"":ve,listening:!0}}),R(!M),w(!0)):m.Am.error("Unable to update lightning configuration. Missing required fields.")},Oe=function(){var e=s.service,n=e.findIndex((function(e){return e.serviceEndpoint.includes("lightning:")}));n>-1&&e.splice(n,1);ue.length>0&&function(t){var n=e.length,r={id:"#DidCommMessaging-".concat(n>0?n+1:1),priority:n,recipientKeys:[],routingKeys:[],serviceEndpoint:t,type:"DidCommMessaging"};e.push(r)}("lightning:".concat(ue));var r=t;r.service=e,i(JSON.stringify(r)),se(""),ce(""),me(""),be(""),Ce(""),je(""),fe(""),w(!1)};return(0,r.jsxs)("div",{className:"max-w-3xl mx-auto py-10 px-4 sm:px-6 lg:py-12 lg:px-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-extrabold text-blue-gray-900",children:"Relay & Lightning"}),(0,r.jsxs)("form",{className:"mt-6 space-y-8 divide-y divide-y-blue-gray-200",children:[(0,r.jsxs)("div",{className:"pt-8 grid grid-cols-1 gap-y-6 sm:grid-cols-6 sm:gap-x-6",children:[(0,r.jsxs)("div",{className:"sm:col-span-6 space-y-3",children:[(0,r.jsx)("h2",{className:"text-xl font-medium text-blue-gray-900",children:"Manage Your Relay"}),(0,r.jsx)("div",{className:"space-y-3",children:(0,r.jsx)(U,{selected:I,setSelected:P})}),(0,r.jsx)("h2",{className:"text-xl font-medium text-blue-gray-900",children:"Register with Relay"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-blue-gray-500",children:"Register with the relay after you have selected a new relay, or routintely to ensure access to the relay."}),(0,r.jsx)("button",{type:"button",onClick:function(){(0,E.Ws)(I).then((function(){return m.Am.info("Registered with relay.")})).catch((function(e){m.Am.error("Unable to register with relay."),console.log(e)}))},className:"mt-3 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Register"}),(0,r.jsx)("div",{className:"relative py-6",children:(0,r.jsx)("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:(0,r.jsx)("div",{className:"w-full border-t border-gray-300"})})})]}),(0,r.jsxs)("div",{className:"sm:col-span-6",children:[(0,r.jsx)("h2",{className:"text-xl font-medium text-blue-gray-900",children:"Manage Your Lightning Node"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-blue-gray-500",children:"This information will be displayed publicly so be careful what you share."}),(null===e||void 0===e?void 0:e.data.lightningConfig.listening)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"mt-1 text-sm text-blue-gray-500",children:"A lightning node is current configured to listen."}),(0,r.jsxs)("p",{className:"mt-1 text-sm font-semibold text-blue-gray-500",children:["Existing LN Pubkey: ",null===e||void 0===e?void 0:e.data.lightningConfig.pubkey]}),JSON.stringify(t.service).includes(null===e||void 0===e?void 0:e.data.lightningConfig.pubkey)&&(0,r.jsx)("p",{className:"mt-1 text-sm text-blue-gray-500",children:"This node is already listed in your did."})]}),(0,r.jsx)("button",{type:"button",onClick:function(){return R(!M)},className:"mt-3 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Update Lightning Settings"}),M&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-3 py-4",children:[(0,r.jsx)("h2",{className:"text-xl font-medium text-blue-gray-900",children:"Build a Lightning Node"}),(0,r.jsx)("p",{className:"mt-1 mb-2 text-sm text-blue-gray-500",children:"Don't have a lightning node already? Impervious supports creating a Voltage Lightning Node via the Voltage API. To get started, supply a Voltage API Key and Node Password and we will handle the rest."}),(0,r.jsx)("a",{href:"https://voltage.cloud/",className:"text-sm text-primary",children:"Head over to voltage.cloud if you do not have an API key."}),W&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(k.Z,{className:"h-5 w-5 text-green-400","aria-hidden":"true"}),(0,r.jsx)("p",{className:"mt-1 text-md font-semibold text-gray-800",children:"Voltage Node Created!"})]}),(0,r.jsxs)("div",{className:"w-full break-words",children:[(0,r.jsxs)("p",{children:["Your Voltage Node has been created. The following is your Voltage Node Configuration Information, use these values to update your Lightning Configuration. Click the values below to copy to clipboard."," "]}),(0,r.jsx)(u.CopyToClipboard,{text:f,onCopy:function(){return m.Am.success("Seed Copied")},children:(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("b",{children:"Voltage Node Name: (Click to Copy)"})," ",f]})}),(0,r.jsx)(u.CopyToClipboard,{text:b,onCopy:function(){return m.Am.success("Seed Copied")},children:(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("b",{children:"Voltage Endpoint: (Click to Copy)"})," ",b]})}),(0,r.jsx)(u.CopyToClipboard,{text:l,onCopy:function(){return m.Am.success("Macaroon Copied!")},children:(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("b",{children:"Admin Macaroon (Hex): (Click to Copy)"})," ",l]})}),(0,r.jsx)(u.CopyToClipboard,{text:Q,onCopy:function(){return m.Am.success("Macaroon Copied!")},children:(0,r.jsxs)("p",{className:"my-2",children:[(0,r.jsx)("b",{children:"TLS Cert (Hex): (Click to Copy)"})," ","".concat(Q.substring(0,100),"............").concat(Q.slice(-100))]})}),(0,r.jsx)("button",{type:"button",onClick:function(){return Te()},className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Good to go. Clear values."})]})]}),ne&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(D.Z,{className:"h-5 w-5 text-red-400","aria-hidden":"true"}),(0,r.jsx)("p",{className:"mt-1 text-md font-semibold text-gray-800",children:"Error occured while creating voltage node."})]})}),J?(0,r.jsx)("div",{children:"Creating Voltage Node ..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"apiKey",className:"block text-sm font-medium text-gray-700",children:"Supply Voltage API Key"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{type:"text",name:"endpoint",id:"endpoint",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-2 border-gray-300 rounded-md px-10 py-2 text-center",placeholder:"Voltage API Key",value:V,onChange:function(e){return Z(e.target.value)}})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"apiKey",className:"block text-sm font-medium text-gray-700",children:"Supply Voltage Node Password"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{type:"password",name:"nodePassword",id:"nodePassword",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-2 border-gray-300 rounded-md px-10 py-2 text-center",placeholder:"Password",value:$,onChange:function(e){return B(e.target.value)}})})]}),$&&V&&(0,r.jsx)("button",{type:"button",onClick:function(){return function(){q(!0),Te();var e="impervious-node-".concat(d()().unix());N(V,e,$).then((function(e){var t=e.nodeName,n=e.apiEndpoint,r=e.hexMacaroon,o=e.tlsCert;q(!1),ee(!0),console.log("NODE CREATED"),c(r),y(n),h(t),G(o),Se(!1),Ae(!1),se(n),ce("10009"),je(r),setTlsCertHex(o)})).catch((function(e){q(!1),re(!0),console.log("NODE CREATION FAILED: ",e)}))}()},className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Create a Voltage Lightning Node"})]})]}),(0,r.jsxs)("div",{className:"space-y-3 py-4",children:[(0,r.jsx)("h2",{className:"text-xl font-medium text-blue-gray-900",children:"Import a Lightning Node"}),(0,r.jsx)("p",{className:"mt-1 mb-2 text-sm text-blue-gray-500",children:"If you already have a running lightning node, or just created one above, enter the configuration information below and Impervious will configure itself to use the given lightning node. Note: This restart the Impervious daemon services and the application will experience a reboot."}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"ip",className:"block text-sm font-medium text-gray-700",children:"Supply Lightning Endpoint Address"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{type:"text",name:"ip",id:"ip",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-2 border-gray-300 rounded-md px-10 py-2 text-center",placeholder:"IP or URI (i.e. xxxxx.t.voltageapp.io)",value:ie,onChange:function(e){return se(e.target.value)}})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"port",className:"block text-sm font-medium text-gray-700",children:"Supply Lightning Port (GRPC)"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{type:"text",name:"port",id:"port",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-2 border-gray-300 rounded-md px-10 py-2 text-center",placeholder:"Port",value:le,onChange:function(e){return ce(e.target.value)}})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"pubkey",className:"block text-sm font-medium text-gray-700",children:"Supply Lightning Pubkey (leave blank if it is a Voltage node)"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{type:"text",name:"pubkey",id:"pubkey",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-2 border-gray-300 rounded-md px-10 py-2 text-center",placeholder:"Pubkey",value:ue,onChange:function(e){return me(e.target.value)}})})]}),(0,r.jsxs)("span",{className:"relative z-0 inline-flex shadow-sm rounded-md",children:[(0,r.jsx)("button",{type:"button",onClick:function(){return Se(!0)},className:"relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:"Use TLS Filepath"}),(0,r.jsx)("button",{type:"button",onClick:function(){return Se(!1)},className:"-ml-px relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:"Use TLS Hex String"})]}),De?(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"tls",className:"block text-sm font-medium text-gray-700",children:"Supply File Path to Lightning TLS Cert"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{type:"text",name:"tls",id:"tls",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-2 border-gray-300 rounded-md px-10 py-2 text-center",placeholder:"Provide full path to TLS Cert",value:pe,onChange:function(e){return be(e.target.value)}})})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"tls",className:"block text-sm font-medium text-gray-700",children:"Supply Lightning TLS Cert (Hex String)"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{type:"text",name:"tls",id:"tls",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-2 border-gray-300 rounded-md px-10 py-2 text-center",placeholder:"TLS Cert (Hex)",value:Ne,onChange:function(e){return Ce(e.target.value)}})})]}),(0,r.jsxs)("span",{className:"relative z-0 inline-flex shadow-sm rounded-md",children:[(0,r.jsx)("button",{type:"button",onClick:function(){return Ae(!0)},className:"relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:"Use Macaroon Filepath"}),(0,r.jsx)("button",{type:"button",onClick:function(){return Ae(!1)},className:"-ml-px relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:"Use Macaroon Hex String"})]}),Pe?(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"macaroon",className:"block text-sm font-medium text-gray-700",children:"Supply File Path to Admin Macaroon"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{type:"text",name:"macaroon",id:"macaroon",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-2 border-gray-300 rounded-md px-10 py-2 text-center",placeholder:"Provide full path to Admin Macaroon",value:ge,onChange:function(e){return fe(e.target.value)}})})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"macaroon",className:"block text-sm font-medium text-gray-700",children:"Supply Admin Macaroon (Hex String)"}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("input",{type:"text",name:"macaroon",id:"macaroon",className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-2 border-gray-300 rounded-md px-10 py-2 text-center",placeholder:"Macaroon (Hex)",value:ve,onChange:function(e){return je(e.target.value)}})})]}),(0,r.jsx)("button",{type:"button",onClick:function(){return Fe()},className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Update Lightning Configuration"})]})]})]})]}),j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"rounded-md bg-yellow-50 p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(S.Z,{className:"h-5 w-5 text-yellow-400","aria-hidden":"true"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Change detected! Do you want to update your DID?"}),(0,r.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,r.jsxs)("p",{children:["Since you have changed your connection endpoints (relay or lightning), if you want users to be able to contact you over these channels you will need to"," ",(0,r.jsx)("b",{children:"update your did"}),". Click the button below to update your did."]})})]})]})}),(0,r.jsxs)("div",{className:"pt-8 flex justify-end",children:[(0,r.jsx)("button",{type:"button",onClick:function(){return w(!1)},className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-blue-gray-900 hover:bg-blue-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Do Not Update"}),(0,r.jsx)("button",{type:"button",onClick:function(){(0,m.Am)((function(e){var t=e.closeToast;return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Are you sure you want to update your DID?"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:function(){Oe(),t()},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Confirm"}),(0,r.jsx)("button",{type:"button",onClick:t,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1})},className:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"Update DID"})]})]})]})]})},R=n(11163),H=n(88100),V=n(20567),Z=n(37887),z=n(50319),$=n(31230),B=n(24796),K=n(75426),Q=n(89531);function G(e,t,n,r,o,i,s){try{var a=e[i](s),l=a.value}catch(c){return void n(c)}a.done?t(l):Promise.resolve(l).then(r,o)}function Y(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){G(i,r,o,s,a,"next",e)}function a(e){G(i,r,o,s,a,"throw",e)}s(void 0)}))}}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var q=function(e){var t=e.longFormDid,n=(0,o.useState)(""),i=n[0],s=n[1],a=(0,H.D3)().user,l=(0,F.LU)().data,c=(0,Z.a)(B.bk,{variables:{twitterUsername:null===a||void 0===a?void 0:a.nickname}}),d=c.data,u=c.loading;c.error,(0,o.useEffect)((function(){var e,t;(null===d||void 0===d||null===(e=d.listDIDS)||void 0===e||null===(t=e.items)||void 0===t?void 0:t.length)>0?s(d.listDIDS.items[0]):s("")}),[d]);var x=J((0,z.D)((0,$.Ps)("\n  mutation CreateDID(\n    $input: CreateDIDInput!\n    $condition: ModelDIDConditionInput\n  ) {\n    createDID(input: $input, condition: $condition) {\n      id\n      twitterUsername\n      longFormDid\n      shortFormDid\n      avatarUrl\n      lastUpdated\n      name\n      createdAt\n      updatedAt\n    }\n  }\n"),{variables:{input:{longFormDid:t,shortFormDid:null===l||void 0===l?void 0:l.id,twitterUsername:null===a||void 0===a?void 0:a.nickname,avatarUrl:null===a||void 0===a?void 0:a.picture,name:null===a||void 0===a?void 0:a.nickname,lastUpdated:(new Date).getTime()}},refetchQueries:[{query:B.bk},"getDIDByTwitter"]}),1)[0],g=J((0,z.D)((0,$.Ps)("\n  mutation UpdateDID(\n    $input: UpdateDIDInput!\n    $condition: ModelDIDConditionInput\n  ) {\n    updateDID(input: $input, condition: $condition) {\n      id\n      twitterUsername\n      longFormDid\n      shortFormDid\n      avatarUrl\n      lastUpdated\n      name\n      createdAt\n      updatedAt\n    }\n  }\n"),{variables:{input:{id:null===i||void 0===i?void 0:i.id,longFormDid:t,shortFormDid:null===l||void 0===l?void 0:l.id,twitterUsername:null===a||void 0===a?void 0:a.nickname,avatarUrl:null===a||void 0===a?void 0:a.picture,name:null===a||void 0===a?void 0:a.nickname,lastUpdated:(new Date).getTime()}},refetchQueries:[{query:B.bk},"getDIDByTwitter"]}),1)[0],h=J((0,z.D)((0,$.Ps)("\n  mutation DeleteDID(\n    $input: DeleteDIDInput!\n    $condition: ModelDIDConditionInput\n  ) {\n    deleteDID(input: $input, condition: $condition) {\n      id\n      twitterUsername\n      longFormDid\n      shortFormDid\n      avatarUrl\n      lastUpdated\n      name\n      createdAt\n      updatedAt\n    }\n  }\n"),{variables:{input:{id:i.id}},refetchQueries:[{query:B.bk},"getDIDByTwitter"]}),1)[0];if(u)return"Loading ...";var p=Y(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a&&(i?(0,m.Am)((function(e){var t=e.closeToast;return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"pb-4",children:"Are you sure you want to update your published DID?"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:function(){try{a&&g().then((function(){m.Am.success("DID Sucessfully Updated!")})).catch((function(e){m.Am.error("Unable to update DID. Please try again"),console.error(e)}))}catch(e){console.log(e)}t()},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Confirm"}),(0,r.jsx)("button",{type:"button",onClick:t,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1}):(0,m.Am)((function(e){var t=e.closeToast;return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"pb-4",children:"Are you sure you want to update your published DID?"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:function(){try{a&&x().then((function(e){e.data,m.Am.success("DID Published Successfuly")})).catch((function(e){console.log(e),m.Am.error("Unable to publish DID. Please try again")}))}catch(e){console.log(e)}t()},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Confirm"}),(0,r.jsx)("button",{type:"button",onClick:t,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1}))}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)}))),b=Y(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,m.Am)((function(e){var t=e.closeToast;return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"pb-4",children:"Unpublish?"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:function(){try{a&&h().then((function(){m.Am.success("DID Sucessfully Unpublished!")})).catch((function(e){m.Am.error("Unable to publish DID. Please try again"),console.error(e)}))}catch(e){console.log(e)}t()},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Confirm"}),(0,r.jsx)("button",{type:"button",onClick:t,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1});case 1:case"end":return e.stop()}}),e)})));return u?"Loading ...":(0,r.jsx)("div",{children:(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md mt-4",children:(0,r.jsx)("ul",{role:"list",className:"divide-y divide-gray-200",children:(0,r.jsx)("li",{children:(0,r.jsx)("div",{className:"flex items-center px-4 py-4 sm:px-6 content-between",children:(0,r.jsxs)("div",{className:"w-full flex justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[i&&(0,r.jsx)("img",{className:"inline-block h-8 w-8 rounded-full",src:i.avatarUrl,alt:""}),(0,r.jsx)("p",{className:"font-semi-bold text-md",children:"Identity"}),i?(0,r.jsxs)("p",{className:"flex items-center text-sm text-gray-500",children:[(0,r.jsx)(K.Z,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-green-400","aria-hidden":"true"}),"Published"]}):(0,r.jsxs)("p",{className:"flex items-center text-sm text-gray-500",children:[(0,r.jsx)(Q.Z,{className:"flex-shrink-0 mr-1.5 h-5 w-5","aria-hidden":"true"}),"Private"]})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[i&&(0,r.jsx)("button",{type:"button",className:"text-red-500",onClick:function(){return b()},children:"Unpublish"}),(0,r.jsx)("button",{type:"button",onClick:function(){return p()},className:"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:i?"Update":"Publish"})]})]})})})})})})})},X=n(46215),W=function(){var e=(0,o.useState)(""),t=e[0],n=e[1],i=(0,F.LU)().data,s=(0,H.D3)().isAuthenticated;return(0,o.useEffect)((function(){i&&(0,V.YH)(i.id).then((function(e){n(e.data.longFormDid)})).catch((function(e){console.log(e)}))}),[i]),(0,r.jsxs)("div",{className:"max-w-3xl mx-auto py-10 px-4 sm:px-6 lg:py-12 lg:px-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-extrabold text-blue-gray-900",children:"Identity"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-y-6 sm:grid-cols-6 sm:gap-x-6",children:[(0,r.jsxs)("div",{className:"sm:col-span-6",children:[(0,r.jsx)("h2",{className:"text-xl font-medium text-blue-gray-900",children:"Profile"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-blue-gray-500",children:"Manage your decentalized identity."})]}),(0,r.jsxs)("div",{className:"sm:col-span-6",children:[(0,r.jsx)("label",{htmlFor:"photo",className:"block text-xl font-medium text-blue-gray-900",children:"Avatar"}),(0,r.jsx)("p",{className:"mt-1 text-md text-blue-gray-500",children:"Here is your avatar, you can rotate your avatar at any time."}),(0,r.jsx)(X.Z,{})]}),(0,r.jsxs)("div",{className:"sm:col-span-6",children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-blue-gray-900",children:"Decentralized Identity"}),(0,r.jsxs)("div",{className:"mt-1",children:[(0,r.jsx)("p",{className:"mt-1 text-sm font-medium text-blue-gray-900 pb-4",children:"This is your Long Form Decentralized Identity that you share with your connections"}),(0,r.jsx)("textarea",{id:"description",name:"description",disabled:!0,rows:4,className:"block w-full p-4 border border-blue-gray-300 rounded-md shadow-sm sm:text-sm focus:ring-primary focus:border-blue-500",defaultValue:t})]})]}),s&&(0,r.jsxs)("div",{className:"sm:col-span-6",children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-xl font-medium text-blue-gray-900",children:"Publish to Impervious Contacts Registry"}),(0,r.jsx)("p",{className:"mt-1 text-md font-medium text-blue-gray-900",children:"You can publish your Identity to the Impervious Contacts Registry. Peers can search for your Twitter username in the Registry to find your latest Identity."}),(0,r.jsx)(q,{longFormDid:t})]})]})]})},ee=[{name:"Relay & Lightning",description:"Manage your relay node.",href:"#",icon:i.Z,current:!1},{name:"Identity",description:"Manage your decentralized settings",href:"#",icon:s.Z,current:!1}];function te(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function ne(){var e=(0,o.useState)("Relay & Lightning"),t=e[0],n=e[1];(0,R.useRouter)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.Z,{currentPage:"Settings",children:(0,r.jsx)("main",{className:"flex-1 flex overflow-hidden h-full",children:(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-y-auto xl:overflow-hidden",children:[(0,r.jsx)("nav",{"aria-label":"Breadcrumb",className:"bg-white border-b border-blue-gray-200 xl:hidden",children:(0,r.jsx)("div",{className:"max-w-3xl mx-auto py-3 px-4 flex items-start sm:px-6 lg:px-8",children:(0,r.jsxs)("a",{href:"#",className:"-ml-1 inline-flex items-center space-x-3 text-sm font-medium text-blue-gray-900",children:[(0,r.jsx)(a.Z,{className:"h-5 w-5 text-blue-gray-400","aria-hidden":"true"}),(0,r.jsx)("span",{children:"Settings"})]})})}),(0,r.jsxs)("div",{className:"flex-1 flex xl:overflow-hidden",children:[(0,r.jsx)("nav",{"aria-label":"Sections",className:"hidden flex-shrink-0 w-96 bg-white border-r border-blue-gray-200 xl:flex xl:flex-col",children:(0,r.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto",children:ee.map((function(e){return(0,r.jsxs)("div",{onClick:function(){return n(e.name)},className:te(e.current?"bg-blue-50 bg-opacity-50":"hover:bg-blue-50 hover:bg-opacity-50","flex p-6 border-b border-blue-gray-200"),"aria-current":e.current?"page":void 0,children:[(0,r.jsx)(e.icon,{className:"flex-shrink-0 -mt-0.5 h-6 w-6 text-blue-gray-400","aria-hidden":"true"}),(0,r.jsxs)("div",{className:"ml-3 text-sm",children:[(0,r.jsx)("p",{className:"font-medium text-blue-gray-900",children:e.name}),(0,r.jsx)("p",{className:"mt-1 text-blue-gray-500",children:e.description})]})]},e.name)}))})}),(0,r.jsxs)("div",{className:"flex-1 xl:overflow-y-auto",children:["Relay & Lightning"===t&&(0,r.jsx)(M,{}),"Identity"===t&&(0,r.jsx)(W,{})]})]})]})})})})}},42480:function(){}},function(e){e.O(0,[270,614,866,240,774,888,179],(function(){return t=3402,e(e.s=t);var t}));var t=e.O();_N_E=t}]);