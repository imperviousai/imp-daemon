(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2],{61704:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/d/files",function(){return r(7205)}])},10668:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(85893),a=r(67294),i=r(56727),s=r(13342);function o(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function l(e){var t=e.title,r=e.options;return(0,n.jsxs)(i.v2,{as:"div",className:"relative inline-block text-left px-2",children:[(0,n.jsx)("div",{children:(0,n.jsxs)(i.v2.Button,{className:"inline-flex justify-center w-full rounded-md px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-gray-500",children:[t,(0,n.jsx)(s.Z,{className:"-mr-1 ml-2 h-5 w-5","aria-hidden":"true"})]})}),(0,n.jsx)(i.uT,{as:a.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,n.jsx)(i.v2.Items,{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,n.jsx)("div",{className:"py-1",children:r.map((function(e,t){return(0,n.jsx)(i.v2.Item,{children:function(t){var r=t.active;return(0,n.jsx)("a",{href:"#",className:o(r?"bg-gray-100 text-gray-900":"text-gray-700","block px-4 py-2 text-sm"),children:e.title})}},t)}))})})})]})}},7135:function(e,t,r){"use strict";r.d(t,{BR:function(){return s},kR:function(){return o}});var n=r(88767),a=r(40782),i=r(40874),s=function(e,t){return(0,n.useQuery)("fetch-files",i.uB,{onSuccess:function(t){e(t)},onError:function(e){a.Am.error("Unable to fetch files. Please try again."),console.log("Unable to fetch files. Error: ",e),t()}})},o=function(e,t){var r=(0,n.useQueryClient)();return(0,n.useMutation)(i.cT,{onSuccess:function(){e(),r.invalidateQueries("fetch-files")},onError:function(e){console.log("Error uploading file: ",e),t()}})}},7205:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var n=r(35666),a=r.n(n),i=r(85893),s=r(67294),o=r(10668),l=r(11240),c=r(65502),d=r(40782),u=r(7135),f=r(40874),x=r(41664);function m(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(c){return void r(c)}o.done?t(l):Promise.resolve(l).then(n,a)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){m(i,n,a,s,o,"next",e)}function o(e){m(i,n,a,s,o,"throw",e)}s(void 0)}))}}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var g="IPFS",v=[{title:"Newest"},{title:"Oldest"}],y=[{title:"All Files"},{title:"Audio"},{title:"Video"},{title:"Text"}];function w(e,t){var r=void 0===t?2:t;if(0===e)return"0 Bytes";var n=r<0?0:r,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]}function j(){var e,t=(0,s.useState)(),r=t[0],n=t[1],m=(0,s.useState)([]),j=m[0],b=m[1],N=((0,u.BR)((function(e){b([]),null===e||void 0===e||e.data.files.forEach((function(e){e=e.split("/")[2],(0,f._t)(e).then(p(a().mark((function t(r){var n,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=atob(r.data.data),t.next=3,(0,f.oy)(n,e);case 3:i=t.sent,console.log(i),i&&b((function(e){return h(e).concat([i])}));case 6:case"end":return t.stop()}}),t)}))))}))})).data,(0,u.kR)((function(){d.Am.success("File uploaded!"),n()}),(function(){return d.Am.error("Error uploading file. Please try again later.")})).mutate),k=p(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r?N(r):d.Am.error("No file selected. Please select a file to upload to IPFS.");case 1:case"end":return e.stop()}}),e)})));return(0,i.jsx)(l.Z,{currentPage:g,hideNav:!1,children:(0,i.jsxs)("div",{className:"px-8 pt-8",children:[(0,i.jsxs)("div",{className:"flex flex-row-reverse pb-8",children:[(0,i.jsx)(o.Z,{title:"Sort By: Newest",options:v}),(0,i.jsx)(o.Z,{title:"All Files",options:y})]}),(0,i.jsxs)("div",{className:"pb-4",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Upload a new file"}),(0,i.jsx)("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md",children:r?(e=r,(0,i.jsxs)("div",{className:"space-y-1 text-center",children:[(0,i.jsx)(c.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,i.jsxs)("div",{className:"flex flex-col text-md text-gray-600",children:[(0,i.jsxs)("div",{children:[e.name," (",w(e.size),")"]}),(0,i.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,i.jsx)("button",{type:"button",onClick:function(){return n(void 0)},className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),(0,i.jsx)("button",{type:"button",onClick:p(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Upload to IPFS"})]})]})]})):(0,i.jsxs)("div",{className:"space-y-1 text-center",children:[(0,i.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:(0,i.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),(0,i.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,i.jsxs)("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500",children:[(0,i.jsx)("span",{children:"Upload a file"}),(0,i.jsx)("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:function(e){return e.target.files&&n(e.target.files[0])}})]}),(0,i.jsx)("p",{className:"pl-1",children:"or drag and drop"})]}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Files may take awhile to upload"})]})})]}),(0,i.jsx)("div",{className:"flex flex-col",children:(0,i.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,i.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,i.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-900 uppercase tracking-wider",children:"Name"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-900 uppercase tracking-wider",children:"Type"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-900 uppercase tracking-wider",children:"Address"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-900 uppercase tracking-wider",children:"Date"}),(0,i.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:(0,i.jsx)("span",{className:"sr-only",children:"Edit"})})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:j.length>0&&j.map((function(e,t){return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)("div",{className:"ml-4",children:(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e&&e.name})})})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("div",{className:"text-sm text-gray-900",children:e&&e.type})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("div",{className:"text-sm text-gray-900",children:e&&e.name})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Status"})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,i.jsx)(x.default,{href:"/d/files/".concat(e&&e.name),passHref:!0,children:(0,i.jsx)("a",{href:"",className:"text-gray-600 hover:text-gray-900",children:"View"})})})]},t)}))})]})})})})})]})})}},40874:function(e,t,r){"use strict";r.d(t,{uB:function(){return d},cT:function(){return u},_t:function(){return f},oy:function(){return x}});var n=r(35666),a=r.n(n),i=r(49695),s=r(21245),o=r(48764).Buffer;function l(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(c){return void r(c)}o.done?t(l):Promise.resolve(l).then(n,a)}var c,d=function(){return(0,i.W)({url:"/v1/ipfs/list",method:"get",headers:{"Grpc-Metadata-X-API-KEY":"".concat(localStorage.getItem("apiKey"))}})},u=function(e){var t=new window.FileReader;t.readAsArrayBuffer(e),t.onloadend=function(){var r=btoa(o(t.result)),n={name:e.name,data:r,updatable:!1};return(0,i.W)({url:"/v1/ipfs/add",method:"post",data:n,headers:{"Grpc-Metadata-X-API-KEY":"".concat(localStorage.getItem("apiKey"))}})}},f=function(e){return(0,i.W)({url:"/v1/ipfs/".concat(e),method:"get",headers:{"Grpc-Metadata-X-API-KEY":"".concat(localStorage.getItem("apiKey"))}})},x=(c=a().mark((function e(t,r){var n,i,o,l,c,d,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.substring(0,20).includes("<!DOCTYPE html>")){e.next=3;break}return n=new File([t],r,{type:"text/html"}),e.abrupt("return",n);case 3:for(i=t.split(","),o=new Uint8Array(i.length),l=0;l<i.length;l++)o[l]=i[l];return e.next=8,(0,s.pM)(o);case 8:if(!(c=e.sent)){e.next=13;break}return console.log("FILETYPE: ",c),d=new File([o],r,{type:c?c.mime:""}),e.abrupt("return",d);case 13:return u=new File([t],r,{type:"text/plain"}),e.abrupt("return",u);case 15:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(r,n){var a=c.apply(e,t);function i(e){l(a,r,n,i,s,"next",e)}function s(e){l(a,r,n,i,s,"throw",e)}i(void 0)}))})},13342:function(e,t,r){"use strict";var n=r(67294);const a=n.forwardRef((function(e,t){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),n.createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}))}));t.Z=a},65502:function(e,t,r){"use strict";var n=r(67294);const a=n.forwardRef((function(e,t){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),n.createElement("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"}))}));t.Z=a}},function(e){e.O(0,[384,245,240,774,888,179],(function(){return t=61704,e(e.s=t);var t}));var t=e.O();_N_E=t}]);