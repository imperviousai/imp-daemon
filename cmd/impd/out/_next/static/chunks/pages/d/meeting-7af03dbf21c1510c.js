(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[783],{7309:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/d/meeting",function(){return n(28082)}])},51079:function(e,t,n){"use strict";var r=n(85893),a=n(67294),s=n(42633);t.Z=function(e){var t=e.setFile,n=e.disabled,i=(0,a.useRef)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{type:"button",onClick:function(e){i.current.click()},children:(0,r.jsx)(s.Z,{className:"h-10 w-10 text-gray-600 font-light","aria-hidden":"true"})}),(0,r.jsx)("input",{type:"file",ref:i,onChange:function(e){t(e.target.files[0]),i.current.value=null},style:{display:"none"},disabled:n})]})}},45192:function(e,t,n){"use strict";var r=n(85893),a=(n(67294),n(68163)),s=n(86588),i=n(13902),o=n(40782);t.Z=function(e){var t,n=e.fileInput,l=e.setFileInput,c=e.progress,d=function(){return l()};return(0,r.jsxs)("div",{children:[" ",(0,r.jsx)("div",{className:"my-3 max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden",children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-0 flex-1 flex justify-between",children:(0,r.jsxs)("p",{className:"w-0 flex-1 text-sm font-medium text-gray-900",children:[n.name," ",(0,r.jsxs)("span",{className:"font-light text-gray-500",children:["(",n.size," bytes)"]})]})}),(0,r.jsx)("div",{className:"ml-4 flex-shrink-0 flex",children:t>0?(0,r.jsx)(s.gy,{height:"20",width:"20",color:"#312e81",ariaLabel:"loading"}):n.isError?(0,r.jsx)(i.Z,{onClick:function(){o.Am.error("Unable to upload file. Please try again."),d(file.id)},className:"h-6 w-6 text-red-600","aria-hidden":"true"}):(0,r.jsxs)("button",{type:"button",className:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:function(){return d()},children:[(0,r.jsx)("span",{className:"sr-only",children:"Close"}),(0,r.jsx)(a.Z,{className:"h-5 w-5","aria-hidden":"true"})]})})]}),c>0&&(0,r.jsx)("div",{className:"flex items-center pt-2",children:(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full dark:bg-gray-700 mx-20",children:(0,r.jsxs)("div",{className:"bg-blue-600 text-xs font-medium text-blue-100 text-center p-0.5 leading-none rounded-full",style:{width:"".concat(Math.floor(c),"%")},children:[" ",Math.floor(c),"%"]})})})]})})]})}},59758:function(e,t,n){"use strict";var r=n(85893),a=(n(67294),n(42833)),s=n(63090),i=n(93162);t.Z=function(e){var t=e.message,n=e.myDid,o=e.fileObj;return(0,r.jsx)("div",{className:"bg-white px-4 py-5 border-2 border-gray-200 rounded-lg sm:px-6 mt-6",children:(0,r.jsxs)("div",{className:"-ml-4 -mt-4 flex justify-between items-center flex-wrap sm:flex-nowrap",children:[(0,r.jsx)("div",{className:"ml-4 mt-4",children:(0,r.jsx)("div",{className:"flex space-x-2 items-center",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("h3",{className:"text-md leading-6 break-all font-medium text-gray-900",children:t.data?t.data.name:"No File Name"}),(0,r.jsx)("p",{className:"mt-1 text-sm font-light text-gray-500",children:t.data&&"(".concat(t.data.size," bytes)")})]})})}),(0,r.jsx)("div",{className:"ml-4 mt-4 flex-shrink-0",children:t.from!==n&&(0,r.jsx)("button",{type:"button",onClick:function(){return function(){var e=t.data,n=e.id,r=e.name,a=e.type;o?(0,i.saveAs)(o,r):(0,s.X$)("file-download-request",{id:n,name:r,type:a})}()},className:"relative inline-flex items-center px-4 py-2 text-sm font-medium rounded-md text-gray-500 hover:text-black",children:(0,r.jsx)(a.Z,{className:"h-6 w-6","aria-hidden":"true"})})})]})})}},49332:function(e,t,n){"use strict";var r=n(67294);t.Z=function(e,t){(0,r.useEffect)((function(){if(e){e.style.height="40px",e.style.minHeight="40px";var t=e.scrollHeight;e.style.height=t+"px"}}),[e,t])}},28082:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(85893),a=n(67294),s=n(56727),i=n(5506),o=function(){return(0,r.jsxs)("div",{className:"flex flex-row w-full h-full justify-between",children:[(0,r.jsx)("div",{})," ",(0,r.jsx)("div",{className:"flex justify-items-center",children:(0,r.jsx)("span",{className:"inline-flex items-center text-sm text-primary font-semibold font-medium",children:"Chat"})}),(0,r.jsx)("div",{})," "]})},l=n(30381),c=n.n(l),d=n(59758),u=n(6218),f=function(e){var t=e.myDid,n=e.messages,s=e.setHasUnreadVideoMessages,i=(0,a.useRef)(null),o=(0,u.ff)().data;(0,a.useEffect)((function(){var e;null===(e=i.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[n]),(0,a.useEffect)((function(){n.length&&s(!1)}),[n,s]);var l=function(e){var t=null===o||void 0===o?void 0:o.data.contacts.find((function(t){return t.did===e}));return t?"".concat(t.name,": "):""};return(0,r.jsxs)("div",{className:"flex flex-col w-full h-full overflow-y-auto",children:[n.map((function(e,n){return(0,r.jsx)("div",{children:"file-transfer-done"===e.type?(0,r.jsx)(d.Z,{message:e,myDid:t}):(0,r.jsx)("div",{className:"flex py-1 ".concat(e.from===t?"pl-4 flex-row-reverse":"pr-4"),children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"px-4 py-2 rounded-lg inline-block rounded-br-none whitespace-pre-line ".concat(e.from===t?"bg-primary bg-opacity-10 text-primary text-sm":"bg-secondary text-white text-sm"),children:e.data}),(0,r.jsx)("div",{className:"flex ".concat(e.from===t&&"flex-row-reverse"),children:(0,r.jsx)("p",{className:"text-primary opacity-80 text-xs",children:"".concat(l(e.from)).concat(c()(e.timestamp).fromNow())})})]})},n)},n)})),(0,r.jsx)("div",{ref:i})]})},m=n(35666),x=n.n(m);var h=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z",clipRule:"evenodd"}))})),g=n(40782),p=n(51079),v=n(45192),y=n(49332),w=n(72045);function b(e,t,n,r,a,s,i){try{var o=e[s](i),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(r,a)}var j=function(e){var t=e.sendPeerMessage,n=e.peers,s=65535,i=(0,a.useState)(""),o=i[0],l=i[1],c=(0,a.useState)(),d=c[0],u=c[1],f=(0,a.useState)(1),m=f[0],j=f[1],N=(0,a.useState)(),k=N[0],C=N[1],E=(0,a.useState)(0),O=E[0],S=E[1],M=(0,a.useState)(s),T=M[0],R=M[1],F=(0,a.useState)(0),z=F[0],Z=F[1],V=(0,a.useState)(""),P=V[0],L=V[1],A=(0,a.useState)(0),_=A[0],I=A[1],H=(0,a.useState)(0),B=H[0],D=H[1],K=(0,a.useRef)(null);(0,y.Z)(K.current,o),(0,a.useEffect)((function(){_>0&&W(m)}),[k,z]);var U,q=(U=x().mark((function e(){var t,n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(),L((0,w.Z)()),e.next=4,d.arrayBuffer();case 4:t=e.sent,I(t.byteLength),n=t.byteLength%s==0?t.byteLength/s:Math.floor(t.byteLength/s)+1,D(n),C(t);case 9:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=U.apply(e,t);function s(e){b(a,n,r,s,i,"next",e)}function i(e){b(a,n,r,s,i,"throw",e)}s(void 0)}))}),W=function(){if(j(m+1),m<=B){var e=k.slice(O,T);if(t({id:P,data:e},"file-transfer-chunk"),S(T),R(T+s),m==B)console.log("Process is complete, counter",m),Z(100),$();else Z(m/B*100)}},X=function(){Z(0),j(1),S(0),R(s)},J=function(e){d&&Q(),0!==n.length?(o.length>0&&t(o,"chat-message"),l("")):g.Am.error("Start a call with someone to use ephemeral chat.")},$=function(){var e=d.name,n=d.type,r=d.size;console.log("File transfer is complete: ",d),t({name:e,type:n,size:r,id:P},"file-transfer-done"),u(),C(),Z(0)},Q=function(){q()};return(0,r.jsxs)(r.Fragment,{children:[d&&(0,r.jsx)(v.Z,{fileInput:d,setFileInput:u,progress:z}),(0,r.jsxs)("div",{className:"flex flex-row w-full items-end",children:[(0,r.jsx)("textarea",{type:"text",name:"message",id:"message",ref:K,className:"shadow-sm pl-2 pt-2 block w-full sm:text-sm border border-grey-100 rounded-md",placeholder:"Type message here ...",onKeyDown:function(e){e.shiftKey&&"Enter"===e.key?l("".concat(o)):"Enter"!==e.key||J()},value:o,onChange:function(e){"\n"!==e.target.value&&l(e.target.value)}}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(p.Z,{setFile:u}),(0,r.jsx)("button",{type:"button",onClick:function(){return J()},disabled:0===n.length,className:"mx-1",children:(0,r.jsx)(h,{className:"h-10 w-10 text-secondary","aria-hidden":"true"})})]})]})]})},N=n(91131),k=n(46249),C=n(82130),E=n(88247);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(l){a=!0,s=l}finally{try{r||null==o.return||o.return()}finally{if(a)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function S(e){var t=e.peers,n=e.openMessaging,l=e.toggleMessaging,c=e.id,d=(0,k.LU)().data,u=O((0,N.KO)(C.A2),1)[0],m=O((0,N.KO)(C.hi),2)[1],x=O((0,N.KO)(C.cN),2)[1];return(0,r.jsx)(s.uT.Root,{show:n,as:a.Fragment,children:(0,r.jsx)(s.Vq,{as:"div",className:"fixed inset-0 overflow-hidden z-10",onClose:l,children:(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,r.jsx)(s.uT.Child,{as:a.Fragment,enter:"ease-in-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(s.Vq.Overlay,{className:"absolute inset-0 bg-gray-500 bg-opacity-10 transition-opacity"})}),(0,r.jsx)("div",{className:"fixed inset-y-0 right-0 pl-10 max-w-full flex",children:(0,r.jsx)(s.uT.Child,{as:a.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,r.jsxs)("div",{className:"relative w-96 max-w-full",children:[(0,r.jsx)(s.uT.Child,{as:a.Fragment,enter:"ease-in-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"absolute top-0 left-0 -ml-8 pt-4 pr-2 flex sm:-ml-10 sm:pr-4",children:(0,r.jsxs)("button",{type:"button",className:"rounded-md text-gray-300 hover:text-white focus:outline-none focus:ring-2 focus:ring-white",onClick:function(){return l()},children:[(0,r.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,r.jsx)(i.Z,{className:"h-6 w-6","aria-hidden":"true"})]})})}),(0,r.jsxs)("div",{className:"h-full flex flex-col bg-white shadow-xl overflow-y-scroll",children:[(0,r.jsx)("div",{className:"grow-0 px-4 py-6 bg-gray-50 sm:px-6",children:(0,r.jsx)(o,{})}),(0,r.jsx)("div",{className:"grow h-full px-4 overflow-hidden",children:(0,r.jsx)(f,{messages:u,myDid:null===d||void 0===d?void 0:d.id,setHasUnreadVideoMessages:x})}),(0,r.jsx)("div",{className:"grow-0 px-4 border-t border-gray-200 py-4 sm:px-6",children:(0,r.jsx)(j,{peers:t,sendPeerMessage:function(e,n){if("file-transfer-chunk"!==n){var r={data:e,timestamp:(new Date).toString(),from:d.id,networkId:c,type:n};"chat-message"!==n&&"file-transfer-done"!==n||m(r),t.map((function(e){e.peer.write(JSON.stringify(r))}))}else{var a="".concat(e.id,":").concat((0,E.c)(e.data));t.map((function(e){e.peer.write(a)}))}}})})]})]})})})]})})})}function M(e){var t=e.openParticipants,n=e.toggleParticipants,o=e.peers,l=(e.id,(0,a.useState)(!1)),c=(l[0],l[1]);return(0,r.jsx)(s.uT.Root,{show:t,as:a.Fragment,children:(0,r.jsx)(s.Vq,{as:"div",className:"fixed inset-0 overflow-hidden",onClose:n,children:(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,r.jsx)(s.uT.Child,{as:a.Fragment,enter:"ease-in-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(s.Vq.Overlay,{className:"absolute inset-0 bg-gray-500 bg-opacity-0 transition-opacity"})}),(0,r.jsx)("div",{className:"fixed inset-y-0 right-0 pl-10 max-w-full flex",children:(0,r.jsx)(s.uT.Child,{as:a.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,r.jsxs)("div",{className:"relative w-screen max-w-lg",children:[(0,r.jsx)(s.uT.Child,{as:a.Fragment,enter:"ease-in-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"absolute top-0 left-0 -ml-8 pt-4 pr-2 flex sm:-ml-10 sm:pr-4",children:(0,r.jsxs)("button",{type:"button",className:"rounded-md text-gray-300 hover:text-white focus:outline-none focus:ring-2 focus:ring-white",onClick:function(){return n()},children:[(0,r.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,r.jsx)(i.Z,{className:"h-6 w-6","aria-hidden":"true"})]})})}),(0,r.jsxs)("div",{className:"h-full flex flex-col bg-white shadow-xl overflow-y-scroll",children:[(0,r.jsx)("div",{className:"grow-0 px-4 py-6 bg-gray-50 sm:px-6 flex justify-center",children:(0,r.jsx)("div",{className:"hidden sm:block flex space-x-4",children:(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)("p",{className:"px-3 py-2 font-medium text-sm rounded-md",children:"Participants"})})})}),(0,r.jsx)("div",{className:"grow px-4 h-full",children:(0,r.jsx)("div",{className:"flow-root mt-6",children:(0,r.jsx)("ul",{className:"-my-5 divide-y divide-gray-200 px-5",children:o.map((function(e,t){return(0,r.jsx)("li",{className:"py-3",children:(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.destDid})})})},t)}))})})}),(0,r.jsx)("div",{className:"grow-0 px-4 border-t border-gray-200 py-4 sm:px-6",children:(0,r.jsxs)("div",{className:"flex space-x-4 justify-center",children:[(0,r.jsx)("button",{type:"button",className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Mute All"}),(0,r.jsx)("button",{onClick:function(){return c(!0)},type:"button",className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Invite"})]})})]})]})})})]})})})}var T=n(78757);var R=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{fillRule:"evenodd",d:"M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z",clipRule:"evenodd"}))}));var F=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{fillRule:"evenodd",d:"M3 5a2 2 0 012-2h10a2 2 0 012 2v8a2 2 0 01-2 2h-2.22l.123.489.804.804A1 1 0 0113 18H7a1 1 0 01-.707-1.707l.804-.804L7.22 15H5a2 2 0 01-2-2V5zm5.771 7H5V5h10v7H8.771z",clipRule:"evenodd"}))})),z=n(63750),Z=n(89583),V=n(64449),P=n(18426);var L=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"}))}));function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(l){a=!0,s=l}finally{try{r||null==o.return||o.return()}finally{if(a)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var _=function(e){var t=e.peer,n=(0,a.useRef)();return(0,a.useEffect)((function(){t.peer.on("stream",(function(e){n.current&&(n.current.srcObject=e)}))}),[t.peer]),(0,a.useEffect)((function(){t.peer._remoteStreams&&t.peer._remoteStreams.length>0&&(n.current.srcObject=t.peer._remoteStreams[0])}),[t.peer._remoteStreams]),(0,r.jsx)("div",{className:"flex justify-center bg-gray-100 rounded-lg m-2 px-2",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("video",{className:"h-full",playsInline:!0,ref:n,autoPlay:!0}),(0,r.jsx)("div",{className:"bg-gray-900 opacity-75 text-white rounded-md text-sm absolute bottom-0 left-0 px-4 m-2",children:t.metadata.contact.name})]})})},I=function(e){var t=e.toggleMessaging,n=e.peers,s=e.id,i=(0,a.useState)(!0),o=i[0],l=i[1],c=(0,a.useState)(!0),d=c[0],u=c[1],f=(0,a.useState)(!1),m=f[0],x=f[1],h=(0,a.useState)(!1),p=h[0],v=h[1],y=(0,a.useState)(!1),w=y[0],b=y[1],j=(0,a.useRef)(),k=A((0,N.KO)(C.g7),2),E=k[0],O=k[1],S=A((0,N.KO)(C.Vl),2),M=S[0],I=S[1],H=A((0,N.KO)(C.Uy),1)[0],B=A((0,N.KO)(C.cN),1)[0];(0,a.useEffect)((function(){K()}),[K]),(0,a.useEffect)((function(){0===n.length&&(null===E||void 0===E||E.getVideoTracks().forEach((function(e){e.enabled=!0})),l(!0),u(!0))}),[n,E]);var D,K=(0,a.useCallback)((function(){return new Promise((function(e,t){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(t){j.current&&(j.current.srcObject=t),O(t),e(t)})).catch((function(e){console.log("Unable to capture video stream: ",e),g.Am.error("Unable to turn on audio and video. Please try again."),t(e)}))}))[O]})),U=function(){null===E||void 0===E||E.getTracks().forEach((function(e){e.stop()})),O(),j.current.srcObject=void 0},q=function(e){var t=e.getVideoTracks()[0];n.forEach((function(e){var n;(null===(n=e.peer._pc)||void 0===n?void 0:n.getSenders().find((function(e){return e.track.kind===t.kind}))).replaceTrack(t)})),x(!m)};return(0,r.jsxs)("div",{className:"bg-gray-50 w-full h-full flex items-center flex-col",children:[(0,r.jsx)("div",{className:"h-5/6 w-full pl-12 pr-12 mt-8",children:(0,r.jsxs)("div",{className:"grid w-full h-full ".concat((D=n.length,D<1?"":1===D?"grid-cols-2":D>1&&D<=3?"grid-cols-2 grid-rows-2":D>3&&D<=5?"grid-cols-3 grid-rows-2":D>5&&D<=7?"grid-cols-4 grid-rows-2":void 0)),children:[(0,r.jsx)("div",{className:"flex justify-center bg-gray-100 rounded-lg m-2 px-2 relative",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("video",{className:"h-full",playsInline:!0,muted:!0,ref:j,autoPlay:!0}),E&&(0,r.jsx)("div",{className:"bg-gray-900 opacity-75 text-white rounded-md text-sm absolute bottom-0 left-0 px-4 m-2",children:"You"})]})}),n.map((function(e,t){return(0,r.jsx)(_,{peer:e},t)}))]})}),(0,r.jsx)("div",{className:"absolute bottom-0 w-11/12 mb-4 px-6",children:(0,r.jsxs)("div",{className:"px-10 h-16 bg-black bg-opacity-40 inset-x-0 bottom-0 flex justify-between items-center rounded-lg",children:[(0,r.jsx)("div",{className:"flex space-x-4",children:(0,r.jsx)(r.Fragment,{children:E?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{type:"button",onClick:function(){return n.forEach((function(e){e.peer.streams.length>0&&e.peer.streams.forEach((function(e){e.getAudioTracks().length>0&&e.getAudioTracks().forEach((function(e){e.enabled=!o}))}))})),void l(!o)},className:"flex flex-col items-center px-2 py-2 text-sm leading-4 font-medium rounded-md text-gray-50 bg-opacity-100 hover:bg-opacity-20 hover:bg-gray-100",children:[o?(0,r.jsx)(z.fr_,{className:"mb-2 h-6 w-6","aria-hidden":"true"}):(0,r.jsx)(z.$Jr,{className:"mb-2 h-6 w-6","aria-hidden":"true"}),o?"Mute":"Unmute"]}),(0,r.jsxs)("button",{type:"button",onClick:function(){return n.forEach((function(e){e.peer.streams.length>0&&e.peer.streams.forEach((function(e){e.getVideoTracks().length>0&&e.getVideoTracks().forEach((function(e){e.enabled=!d}))}))})),void u(!d)},className:"flex flex-col items-center px-2 py-2 text-sm leading-4 font-medium rounded-md text-gray-50 bg-opacity-100 hover:bg-opacity-20 hover:bg-gray-100",children:[d?(0,r.jsx)(Z.KoQ,{className:"mb-2 h-6 w-6","aria-hidden":"true"}):(0,r.jsx)(Z.uCi,{className:"mb-2 h-6 w-6","aria-hidden":"true"}),d?"Stop Video":"Start Video"]}),0===n.length&&(0,r.jsxs)("button",{type:"button",onClick:function(){return U()},className:"flex flex-col items-center px-2 py-2 text-sm leading-4 font-medium rounded-md text-gray-50 bg-opacity-100 hover:bg-opacity-20 hover:bg-gray-100",children:[(0,r.jsx)(L,{className:"mb-2 h-6 w-6","aria-hidden":"true"}),"Disconnect A/V"]})]}):(0,r.jsx)(r.Fragment,{children:0===n.length&&(0,r.jsx)("button",{type:"button",onClick:function(){return K()},className:"flex flex-col items-center px-2 py-2 text-sm leading-4 font-medium rounded-md text-gray-50 bg-opacity-100 hover:bg-opacity-20 hover:bg-gray-100",children:"Connect Audio & Video"})})})}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)("button",{onClick:function(){if(!E)return v(!0),void(0,g.Am)((function(e){var t=e.closeToast;return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"pb-1",children:"Turn on camera and microphone?"}),(0,r.jsxs)("p",{className:"text-xs pb-2",children:["Do you want to turn on camera and microphone? This is a chat-only invitation."," "]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:function(){K(),v(!0),t()},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Connect Audio/Video"}),(0,r.jsx)("button",{type:"button",onClick:function(){t(),v(!0)},className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Continue"})]})]})}),{autoClose:!1});v(!0)},type:"button",className:"flex flex-col items-center px-2 py-2 text-sm leading-4 font-medium rounded-md text-gray-50 bg-opacity-100 hover:bg-opacity-20 hover:bg-gray-100",children:[(0,r.jsx)(T.Z,{className:"mb-2 h-6 w-6","aria-hidden":"true"}),n.length?"Participants (".concat(n.length,")"):"Participants"]}),(0,r.jsxs)("div",{className:"flex items-center px-6 py-2 ",children:[B&&(0,r.jsx)("div",{className:"bg-red-500 flex-shrink-0 w-3 h-3 rounded-full","aria-hidden":"true"}),(0,r.jsxs)("button",{onClick:function(){return t()},type:"button",className:"flex flex-col items-center px-2 text-sm leading-4 font-medium rounded-md text-gray-50 bg-opacity-100 hover:bg-opacity-20 hover:bg-gray-100",children:[(0,r.jsx)(R,{className:"mb-2 h-6 w-6","aria-hidden":"true"}),"Chat"]})]}),(0,r.jsx)("div",{className:"flex items-center px-6 py-2 ",children:(0,r.jsxs)("button",{onClick:function(){return console.log(E.getVideoTracks()[0]),void(m?navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(e){j.current&&(j.current.srcObject=e),O(e),q(e)})):navigator.mediaDevices.getDisplayMedia({audio:!0,video:!0,cursor:!0}).then((function(e){j.current&&(j.current.srcObject=e),O(e),q(e)})))},type:"button",className:"flex flex-col items-center px-2 text-sm leading-4 font-medium rounded-md text-green-400 bg-opacity-100 hover:bg-opacity-20 hover:bg-gray-100",children:[(0,r.jsx)(F,{className:"mb-2 h-6 w-6","aria-hidden":"true"}),m?"Stop Screen Share":"Share Screen"]})}),(0,r.jsxs)("button",{type:"button",onClick:function(){return b(!0)},className:"flex flex-col items-center px-4 py-2 text-sm leading-4 font-medium rounded-md text-gray-50 bg-opacity-100 hover:bg-opacity-20 hover:bg-gray-100",children:[(0,r.jsx)(z.mly,{className:"mb-2 h-6 w-6 text-yellow-400","aria-hidden":"true"}),"Send/Receive"]})]}),(0,r.jsx)("div",{className:"flex space-x-4",children:(0,r.jsx)("button",{type:"button",onClick:function(){return U(),I(M.filter((function(e){return e.networkId!==H}))),void n.forEach((function(e){e.peer.destroy()}))},className:"inline-flex items-center px-8 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-200",children:"End"})}),(0,r.jsx)(P.Z,{open:w,setOpen:b,selectedContact:null}),(0,r.jsx)(V.Z,{open:p,setOpen:v,networkId:s,localStream:E||!1,title:"Invite Users to Meeting",subtitle:"Invite people to join this meeting.",type:"video-call-invitation"})]})})]})},H=n(11240);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(l){a=!0,s=l}finally{try{r||null==o.return||o.return()}finally{if(a)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var D=function(){var e=function(){return i(!s)},t=function(){return c(!l)},n=(0,a.useState)(!1),s=n[0],i=n[1],o=(0,a.useState)(!1),l=o[0],c=o[1],d=B((0,N.KO)(C.Uy),2),u=d[0],f=d[1],m=B((0,N.KO)(C.C3),1)[0];return(0,a.useEffect)((function(){if(!u){console.log("Creating a new meeting room.");var e=(0,w.Z)();f(e)}}),[u,f]),(0,r.jsxs)(H.Z,{currentPage:"Meeting",hideNav:!0,children:[(0,r.jsx)(I,{peers:m,id:u,toggleParticipants:t,toggleMessaging:e}),(0,r.jsx)(S,{peers:m,id:u,openMessaging:s,toggleMessaging:e}),(0,r.jsx)(M,{peers:m,id:u,openParticipants:l,toggleParticipants:t})]})}},88357:function(e,t,n){"use strict";n.d(t,{w_:function(){return c}});var r=n(67294),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=r.createContext&&r.createContext(a),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function l(e){return e&&e.map((function(e,t){return r.createElement(e.tag,i({key:t},e.attr),l(e.child))}))}function c(e){return function(t){return r.createElement(d,i({attr:i({},e.attr)},t),l(e.child))}}function d(e){var t=function(t){var n,a=e.attr,s=e.size,l=e.title,c=o(e,["attr","size","title"]),d=s||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,c,{className:n,style:i(i({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&r.createElement("title",null,l),e.children)};return void 0!==s?r.createElement(s.Consumer,null,(function(e){return t(e)})):t(a)}},61782:function(e,t,n){"use strict";var r=n(67294);const a=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"}))}));t.Z=a},10822:function(e,t,n){"use strict";var r=n(67294);const a=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 15l7-7 7 7"}))}));t.Z=a},13902:function(e,t,n){"use strict";var r=n(67294);const a=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}));t.Z=a},58057:function(e,t,n){"use strict";var r=n(67294);const a=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))}));t.Z=a},42833:function(e,t,n){"use strict";var r=n(67294);const a=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"}))}));t.Z=a},42633:function(e,t,n){"use strict";var r=n(67294);const a=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"}))}));t.Z=a},91013:function(e,t,n){"use strict";var r=n(67294);const a=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"}))}));t.Z=a},78757:function(e,t,n){"use strict";var r=n(67294);const a=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"}))}));t.Z=a},68163:function(e,t,n){"use strict";var r=n(67294);const a=r.forwardRef((function(e,t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),r.createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"}))}));t.Z=a}},function(e){e.O(0,[270,445,13,384,240,426,449,774,888,179],(function(){return t=7309,e(e.s=t);var t}));var t=e.O();_N_E=t}]);