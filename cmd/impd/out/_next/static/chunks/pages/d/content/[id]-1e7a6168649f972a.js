(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[356],{39807:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/d/content/[id]",function(){return n(95712)}])},85528:function(e,t,n){"use strict";var r=n(85893),o=n(67294),s=n(6828);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}t.Z=function(e){var t=e.contact,n=e.className,i=(0,o.useState)(),c=i[0],l=i[1],u=(0,o.useState)(),d=u[0],f=u[1];return(0,o.useEffect)((function(){if(t){var e=JSON.parse(t.metadata),n=e.avatar,r=e.avatarUrl;l(n),f(r)}}),[t]),(0,r.jsx)(o.Fragment,{children:d?(0,r.jsx)("img",{className:"rounded-full ".concat(n),src:d,alt:"avatar"}):c?(0,r.jsx)(s.nQ,a({className:n},c)):(0,r.jsx)(s.nQ,{className:n})})}},7135:function(e,t,n){"use strict";n.d(t,{BR:function(){return i},kR:function(){return a}});var r=n(88767),o=n(40782),s=n(40874),i=function(e,t){return(0,r.useQuery)("fetch-files",s.uB,{onSuccess:function(t){e(t)},onError:function(e){o.Am.error("Unable to fetch files. Please try again."),console.log("Unable to fetch files. Error: ",e),t()}})},a=function(e,t){var n=(0,r.useQueryClient)();return(0,r.useMutation)(s.cT,{onSuccess:function(){e(),n.invalidateQueries("fetch-files")},onError:function(e){console.log("Error uploading file: ",e),t()}})}},95712:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var r=n(35666),o=n.n(r),s=n(85893),i=n(67294),a=n(3576),c=n(11355),l=n(82546),u=n(10197),d=n(5506),f=n(75026),m=n(10401),x=n(30093),h=(n(78183),n(19311),n(63090)),p=n(28895),g=n.n(p),v=n(82130);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=n(71167),j=function(e){var t=e.docId,n=e.documentRef,r=e.showAutoSave,o=e.peers,a=e.myDid,c=(0,i.useState)(),l=c[0],u=c[1],d=(0,i.useRef)(new(g())),f=(0,i.useRef)(),m=(0,i.useCallback)((function(){f.current&&t&&v.cp.setItem(t,{contents:f.current.editor.getContents(),lastUpdated:(new Date).toString(),created:(new Date).toString(),owner:null===a||void 0===a?void 0:a.id})}),[null===a||void 0===a?void 0:a.id,t]),x=(0,i.useCallback)((function(e){e&&f.current&&v.cp.getItem(e.detail.id).then((function(e){e&&f.current.editor.setContents(e.contents)})).catch((function(e){return console.log(e)}))}),[]);(0,i.useEffect)((function(){return(0,h.on)("save-draft-local-state",m),function(){(0,h.on)("save-draft-local-state",m)}}),[m]),(0,i.useEffect)((function(){return(0,h.on)("restore-document-draft",x),function(){(0,h.on)("restore-document-draft",x)}}),[x]);var p=(0,i.useCallback)((function(e){var n={type:"quill-delta-update",from:null===a||void 0===a?void 0:a.id,data:e,timestamp:(new Date).toString(),networkId:t};o.forEach((function(e){e.peer._channelReady&&e.peer.write(JSON.stringify(n))}))}),[t,null===a||void 0===a?void 0:a.id,o]);(0,i.useEffect)((function(){var e=f.current.getEditor();n.current=e,u(e)}),[n]),(0,i.useEffect)((function(){v.jI.getItem(t).then((function(e){e&&f.current.editor.setContents(e.contents)})).catch((function(e){return console.log(e)}))}),[t]),(0,i.useEffect)((function(){setInterval((function(){d.current.length()>0&&f.current&&v.jI.getItem(t).then((function(e){return e?v.jI.setItem(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}({},e,{contents:f.current.editor.getContents(),lastUpdated:(new Date).toString()})):(console.log("no doc"),void 0!==t?v.jI.setItem(t,{contents:f.current.editor.getContents(),lastUpdated:(new Date).toString(),created:(new Date).toString(),owner:null===a||void 0===a?void 0:a.id}):void 0)})).then((function(){r(),d.current=new(g())})).catch((function(e){return console.log(e)}))}),3e3)}),[t,r,null===a||void 0===a?void 0:a.id]),(0,i.useEffect)((function(){if(null!=l){var e=function(e,t,n){switch(n){case"user":p(e),d.current=d.current.compose(e);break;case"api":d.current=d.current.compose(e)}};return l.on("text-change",e),function(){l.off("text-change",e)}}}),[f,p,l]);var j=(0,i.useCallback)((function(e){var t=e.detail.data;l&&l.updateContents(t)}),[l]);(0,i.useEffect)((function(){if(l)return(0,h.on)("quill-delta-update",j),function(){(0,h.S1)("quill-delta-update",j)}}),[l,j]);return(0,s.jsx)(y,{ref:f,className:"w-full h-full",placeholder:"Start your journey ...",modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike","blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],["link","image"],["clean"]]},formats:["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","align","code-block"],theme:"snow"})},w=n(68121),N=n(41664),C=n(11163),k=n(88554),S=n(30653),E=n(40782),I=n(64449),P=n(91131),O=n(7135),D=n(46249),A=n(6218),T=n(30381),F=n.n(T),R=n(93162),Z=n(83573),_=n(85528);function U(e,t,n,r,o,s,i){try{var a=e[s](i),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,o)}function Y(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function i(e){U(s,r,o,i,a,"next",e)}function a(e){U(s,r,o,i,a,"throw",e)}i(void 0)}))}}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){o=!0,s=c}finally{try{r||null==a.return||a.return()}finally{if(o)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var z=["docx","pdf","html"];var M=function(){var e=(0,i.useState)(!1),t=e[0],r=e[1],p=(0,i.useState)(!1),g=p[0],b=p[1],y=(0,i.useState)(!1),T=y[0],U=y[1],M=(0,i.useState)(""),W=M[0],X=M[1],B=(0,i.useState)(!1),K=B[0],Q=B[1],G=(0,i.useState)(!1),H=G[0],J=G[1],L=(0,i.useState)(),V=L[0],$=L[1],ee=q((0,P.KO)(v.uy),1)[0],te=q((0,P.KO)(v.sY),2)[1],ne=((0,O.kR)().mutate,(0,D.LU)().data),re=((0,A.ff)().data,(0,C.useRouter)()),oe=re.query.id;(0,i.useEffect)((function(){v.cp.iterate((function(e,t,n){t===oe&&J(!0)}))}),[oe,ee]),(0,i.useEffect)((function(){oe&&(te(oe),v.jI.getItem(oe).then((function(e){return $(e)})).catch((function(e){return console.log("Unable to retrieve document")})))}),[oe,te]);var se=(0,i.useCallback)((function(e){var t=e.detail,n=t.title,r=t.docId;oe===r&&X(n)}),[oe]);(0,i.useEffect)((function(){return(0,h.on)("quill-delta-title-update",se),function(){(0,h.S1)("quill-delta-title-update",se)}}),[se]);var ie=(0,i.useRef)(),ae=function(){var e=ie.current.getContents(),t={encodeHtml:!0,inlineStyles:{font:{serif:"font-family: Georgia, Times New Roman, serif",monospace:"font-family: Monaco, Courier New, monospace"},size:{small:"font-size: 0.75em",large:"font-size: 1.5em",huge:"font-size: 2.5em"},indent:function(e,t){var n=3*parseInt(e,10);return"padding-"+("rtl"===t.attributes.direction?"right":"left")+":"+n+"em"},direction:function(e,t){return"rtl"===e?"direction:rtl"+(t.attributes.align?"":"; text-align: inherit"):""}}};return new k.bc(e.ops,t).convert()},ce=Y(o().mark((function e(){var t,r,s,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ie.current,r=t.getContents(),e.next=4,n.e(192).then(n.t.bind(n,37542,23));case 4:return s=e.sent.pdfExporter,e.next=7,s.generatePdf(r);case 7:i=e.sent,(0,R.saveAs)(i,"".concat(W.length?W:oe,".pdf"));case 9:case"end":return e.stop()}}),e)}))),le=Y(o().mark((function e(){var t,r,s,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ie.current,r=t.getContents(),s={exportAs:"blob"},e.next=5,Promise.all([n.e(301),n.e(7)]).then(n.t.bind(n,40007,23));case 5:return i=e.sent,e.next=8,i.generateWord(r,s);case 8:a=e.sent,(0,R.saveAs)(a,"".concat(W.length?W:oe,".docx"));case 10:case"end":return e.stop()}}),e)}))),ue=function(e){"html"===e&&function(){var e="<!DOCTYPE html><html>".concat(ae(),"</html>"),t=new File([e],"".concat(W,".html"),{type:"text/html"});(0,R.saveAs)(t,"".concat(W.length?W:oe,".html"))}(),"pdf"===e&&ce(),"docx"===e&&le()};(0,i.useEffect)((function(){v.jI.getItem(oe).then((function(e){return e&&e.title&&X(e.title)}))}),[oe]);var de=function(){(0,E.Am)((function(e){var t=e.closeToast;return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"pb-4",children:"Restore this document?"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{type:"button",onClick:function(){(0,h.X$)("restore-document-draft",{id:oe}),t()},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Restore"}),(0,s.jsx)("button",{type:"button",onClick:t,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1})},fe=function(){(0,E.Am)((function(e){var t=e.closeToast;return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"pb-4",children:"Delete document state?"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{type:"button",onClick:function(){J(!1),v.cp.removeItem(oe),t()},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Restore"}),(0,s.jsx)("button",{type:"button",onClick:t,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1})},me=function(){var e=(0,i.useState)(""),t=e[0],n=e[1];return(0,i.useEffect)((function(){if(ie.current){var e=ae();n(e)}}),[]),(0,s.jsx)("div",{className:"pt-4",children:(0,S.ZP)(t)})},xe=function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsx)("div",{className:"mt-4 flex space-x-3 md:mt-0",children:(0,s.jsxs)("button",{type:"button",onClick:function(){(0,E.Am)((function(e){return e.closeToast,(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"pb-4 flex flex-col w-full justify-center",children:[(0,s.jsx)("p",{className:"pb-4 text-grey-900",children:"Save As ..."}),(0,s.jsx)("span",{className:"relative z-0 inline-flex shadow-sm rounded-md",children:z.map((function(e,t){return(0,s.jsx)("button",{type:"button",onClick:function(){return ue(e)},className:"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",children:(0,s.jsx)("p",{className:"font-semibold",children:e.toUpperCase()})},t)}))})]})})}),{autoClose:!1})},className:"w-full inline-flex justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900",children:[(0,s.jsx)(u.Z,{className:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),(0,s.jsx)("span",{children:"Save/Download"})]})}),(0,s.jsxs)("div",{className:"mt-4 flex space-x-3 md:mt-0",children:[(0,s.jsxs)("button",{type:"button",onClick:function(){return Q(!K)},className:"inline-flex justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900",children:[(0,s.jsx)(f.Z,{className:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),(0,s.jsx)("span",{children:K?"Edit":"Preview"})]}),(0,s.jsxs)("button",{type:"button",onClick:function(){(0,E.Am)((function(e){var t=e.closeToast;return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"pb-4",children:"Delete this file?"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{type:"button",onClick:function(){v.jI.removeItem(oe).then((function(){re.back(),E.Am.success("Document removed."),t()}))},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Delete"}),(0,s.jsx)("button",{type:"button",onClick:t,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1})},className:"inline-flex justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900",children:[(0,s.jsx)(d.Z,{className:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),(0,s.jsx)("span",{children:"Delete"})]})]}),(0,s.jsx)("div",{className:"flex flex-col space-y-3",children:(0,s.jsxs)("p",{className:"text-sm font-light text-grey-500",children:["Draft ",g&&"(Saving ...)"]})}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)("button",{type:"button",onClick:function(){return U(!0)},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-primary hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Invite Collaborators"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"}),(0,s.jsxs)("span",{className:"text-gray-900 text-sm font-medium",children:["Created on ","".concat(F()(null===V||void 0===V?void 0:V.created).format("MM.DD.YYYY"))]})]})]}),(0,s.jsxs)("div",{className:"mt-6 border-t border-gray-200 py-6 space-y-8",children:[H&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-gray-500",children:"About to connect to a user? We saved a copy of your work in case you need to reset the document to this point in time."}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:de,className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-primary hover:bg-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Restore"}),(0,s.jsx)("button",{type:"button",onClick:fe,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-gray-500",children:"Connected Users"}),(0,s.jsx)("ul",{role:"list",className:"mt-3 space-y-3",children:ee.map((function(e,t){return(0,s.jsx)("li",{className:"flex justify-start group",children:(0,s.jsxs)("a",{href:"#",className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(_.Z,{contact:e.metadata.contact,className:"h-5 w-5"})}),(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.metadata.contact.name}),(0,s.jsx)(d.Z,{className:"h-5 w-5 text-red-300 hidden group-hover:block",onClick:function(){return function(e){(0,E.Am)((function(t){var n=t.closeToast;return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"pb-4 text-bold",children:"Disconnect with this user?"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{type:"button",onClick:function(){e.peer.destroy(),n()},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Disconnect"}),(0,s.jsx)("button",{type:"button",onClick:n,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"})]})]})}),{autoClose:!1})}(e)}})]})},t)}))})]})]})]})};return(0,s.jsx)("div",{className:"bg-white",children:(0,s.jsxs)(a.Z,{currentPage:"Live Docs",children:[(0,s.jsx)(I.Z,{open:T,setOpen:U,networkId:oe,localStream:!1,title:"Invite Users to Collaborate With",subtitle:"Invite people to work on this document with.",type:"doc-collab-request"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(c.u.Root,{show:t,as:i.Fragment,children:(0,s.jsxs)(l.V,{as:"div",className:"fixed inset-0 flex z-40 md:hidden",onClose:r,children:[(0,s.jsx)(c.u.Child,{as:i.Fragment,enter:"transition-opacity ease-linear duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity ease-linear duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)(l.V.Overlay,{className:"fixed inset-0 bg-gray-600 bg-opacity-75"})}),(0,s.jsx)(c.u.Child,{as:i.Fragment,enter:"transition ease-in-out duration-300 transform",enterFrom:"-translate-x-full",enterTo:"translate-x-0",leave:"transition ease-in-out duration-300 transform",leaveFrom:"translate-x-0",leaveTo:"-translate-x-full",children:(0,s.jsxs)("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white",children:[(0,s.jsx)(c.u.Child,{as:i.Fragment,enter:"ease-in-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:(0,s.jsxs)("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:function(){return r(!1)},children:[(0,s.jsx)("span",{className:"sr-only",children:"Close sidebar"}),(0,s.jsx)(d.Z,{className:"h-6 w-6 text-white","aria-hidden":"true"})]})})}),(0,s.jsx)("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:(0,s.jsx)("nav",{className:"mt-5 px-2 space-y-1 pl-8",children:(0,s.jsx)(xe,{})})})]})}),(0,s.jsx)("div",{className:"flex-shrink-0 w-14"})]})}),(0,s.jsx)("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:right-0",children:(0,s.jsx)("div",{className:"flex-1 flex flex-col min-h-0 border-r border-gray-200",children:(0,s.jsx)("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:(0,s.jsx)("nav",{className:"mt-5 flex-1 px-2 space-y-1 border-l",children:(0,s.jsx)(xe,{})})})})}),(0,s.jsxs)("div",{className:"md:pr-64 flex flex-col flex-1",children:[(0,s.jsxs)("div",{className:"sticky top-0 z-10 md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 flex justify-between",children:[(0,s.jsx)(N.default,{href:"/d/content",passHref:!0,children:(0,s.jsx)("button",{type:"button",className:"mt-2.5 ml-2.5 inline-flex items-center mb-4 px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm hover:bg-gray-200 text-primary hover:text-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:(0,s.jsx)(w.Z,{className:"w-6 h-6"})})}),(0,s.jsxs)("button",{type:"button",className:"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500",onClick:function(){return r(!0)},children:[(0,s.jsx)("span",{className:"sr-only",children:"Open sidebar"}),(0,s.jsx)(x.Z,{className:"h-6 w-6","aria-hidden":"true"})]})]}),(0,s.jsx)("main",{className:"flex-1",children:(0,s.jsxs)("div",{className:"pt-1 pb-6",children:[(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:(0,s.jsx)(N.default,{href:"/d/content",passHref:!0,children:(0,s.jsx)("button",{type:"button",className:"hidden md:flex mt-2.5 ml-2.5 inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded shadow-sm hover:bg-gray-200 text-primary hover:text-primary-hover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:(0,s.jsx)(w.Z,{className:"w-6 h-6"})})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-48 flex flex-col",children:[(0,s.jsx)("input",{className:"text-2xl font-medium text-gray-900 w-full pt-2",defaultValue:W,value:W,onChange:function(e){return t=e.target.value,(0,Z.Z)(t,oe),X(t),void ee.forEach((function(e){e.peer.connected&&e.peer.write(JSON.stringify({type:"quill-delta-title-update",from:null===ne||void 0===ne?void 0:ne.id,data:{title:t,id:oe},timestamp:(new Date).toString(),networkId:oe}))}));var t},placeholder:"Title"}),(0,s.jsx)("div",{className:"pb-3 xl:pb-0",children:K?(0,s.jsx)(me,{}):(0,s.jsx)(j,{docId:oe,documentRef:ie,showAutoSave:function(){b(!0),setTimeout((function(){return b(!1)}),1e3)},peers:ee,myDid:ne})})]})]})})]})]})]})})}},40874:function(e,t,n){"use strict";n.d(t,{uB:function(){return d},cT:function(){return f},_t:function(){return m},oy:function(){return x}});var r=n(35666),o=n.n(r),s=n(49695),i=n(21245),a=n(47193),c=n(48764).Buffer;function l(e,t,n,r,o,s,i){try{var a=e[s](i),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,o)}var u,d=function(){return(0,s.W)({url:"/v1/ipfs/list",method:"get",headers:{"Grpc-Metadata-X-API-KEY":"".concat((0,a.P)())}})},f=function(e){var t=new window.FileReader;t.readAsArrayBuffer(e),t.onloadend=function(){var n=btoa(c(t.result)),r={name:e.name,data:n,updatable:!1};return(0,s.W)({url:"/v1/ipfs/add",method:"post",data:r,headers:{"Grpc-Metadata-X-API-KEY":"".concat((0,a.P)())}})}},m=function(e){return(0,s.W)({url:"/v1/ipfs/".concat(e),method:"get",headers:{"Grpc-Metadata-X-API-KEY":"".concat((0,a.P)())}})},x=(u=o().mark((function e(t,n){var r,s,a,c,l,u,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.substring(0,20).includes("<!DOCTYPE html>")){e.next=3;break}return r=new File([t],n,{type:"text/html"}),e.abrupt("return",r);case 3:for(s=t.split(","),a=new Uint8Array(s.length),c=0;c<s.length;c++)a[c]=s[c];return e.next=8,(0,i.pM)(a);case 8:if(!(l=e.sent)){e.next=13;break}return console.log("FILETYPE: ",l),u=new File([a],n,{type:l?l.mime:""}),e.abrupt("return",u);case 13:return d=new File([t],n,{type:"text/plain"}),e.abrupt("return",d);case 15:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=u.apply(e,t);function s(e){l(o,n,r,s,i,"next",e)}function i(e){l(o,n,r,s,i,"throw",e)}s(void 0)}))})},50247:function(){}},function(e){e.O(0,[774,445,13,270,717,383,126,245,653,487,576,449,888,179],(function(){return t=39807,e(e.s=t);var t}));var t=e.O();_N_E=t}]);