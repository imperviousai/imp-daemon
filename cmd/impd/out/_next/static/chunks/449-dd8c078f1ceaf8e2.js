"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[449],{14887:function(e,t,n){var r=n(85893),a=n(67294);t.Z=function(e){var t=e.contact,n=e.className,i=(0,a.useState)(),s=i[0],o=i[1];return(0,a.useEffect)((function(){if(t){var e=JSON.parse(t.metadata).username;o(e)}}),[t]),(0,r.jsxs)(r.Fragment,{children:[s&&(0,r.jsx)("svg",{className:n,"aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"twitter",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,r.jsx)("path",{fill:"#1D9BF0",d:"M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"})})," "]})}},64449:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(85893),a=n(67294),i=n(11355),s=n(82546),o=n(5506),l=n(91131),c=n(82130),d=n(43101),u=n(59856),m=n(46249),x=n(6218),f=n(61751),h=n(40782),v=n(63090),p=n(85528),g=n(73210),y=n(14887);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){a=!0,i=l}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var N=function(e){var t=e.selected,n=e.setSelected,a=e.peers,i=e.networkId,s=(0,x.ff)().data,o=(0,x.JA)().data,d=j((0,l.KO)(c.kH),2)[1],u=function(e){return t.includes(e)},m=function(e){return u(e)?n((function(){return t.filter((function(t){return t!==e}))})):n((function(t){return w(t).concat([e])}))},f=function(e){return a.find((function(t){var n;return(null===(n=t.metadata.contact)||void 0===n?void 0:n.did)===(null===e||void 0===e?void 0:e.did)&&t.metadata.networkId===i}))},v=function(e){var t,n=f(e);return!!n&&"open"===(null===(t=n.peer._channel)||void 0===t?void 0:t.readyState)},g=function(e){var t,n=f(e);return!!n&&"connecting"===(null===(t=n.peer._channel)||void 0===t?void 0:t.readyState)},b=function(e){return v(e)?"Connected":g(e)?"Invited":void 0};return(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"flow-root mt-6",children:(0,r.jsx)("ul",{role:"list",className:"-my-5 divide-y divide-gray-200",children:null===s||void 0===s?void 0:s.data.contacts.map((function(e,t){return(0,r.jsx)("li",{className:"py-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(p.Z,{contact:e,className:"h-8 w-8"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"text-sm font-medium text-gray-900 truncate flex items-center space-x-2",children:[null===e||void 0===e?void 0:e.name,e&&(0,r.jsx)(y.Z,{contact:e,className:"ml-2 h-4 w-4"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 truncate",children:b(e)})]}),(null===o||void 0===o?void 0:o.includes(e.did))?(0,r.jsx)("span",{className:"ml-2 inline-flex items-center rounded-md bg-red-100 px-2.5 py-0.5 text-sm font-medium text-red-800",children:"Blocked"}):(0,r.jsx)(r.Fragment,{children:!v(e)&&(0,r.jsx)("div",{children:g(e)?(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{onClick:function(){return function(e){var t=f(e);t&&d(t),m(e)}(e)},className:"inline-flex items-center shadow-sm px-2.5 py-0.5 border border-gray-300 text-sm leading-5 font-medium rounded-full text-gray-700 bg-white hover:bg-gray-50",children:"Try Again"}),(0,r.jsx)("button",{onClick:function(){return function(e){var t=f(e);t?(d(t),h.Am.success("Invitation revoked.")):console.error("Error: Unable to find matching peer.")}(e)},className:"inline-flex items-center shadow-sm px-2.5 py-0.5 border border-red-300 text-sm leading-5 font-medium rounded-full text-red-700 bg-white hover:bg-red-50",children:"Remove"})]}):(0,r.jsx)("button",{onClick:function(){return m(e)},className:"".concat(u(e)?"text-white bg-primary hover:bg-primary-hover":"text-gray-700 bg-white hover:bg-gray-50"," inline-flex items-center shadow-sm px-2.5 py-0.5 border border-gray-300 text-sm leading-5 font-medium rounded-full "),children:u(e)?"Undo":"Invite"})})})]})},e.did)}))})})})},k=function(e){var t=e.peers;return(0,r.jsx)("div",{children:(0,r.jsx)("ul",{role:"list",className:"mt-2 divide-y divide-gray-200 px-4",children:t.map((function(e,t){return(0,r.jsxs)("li",{className:"flex items-center justify-between py-3",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(p.Z,{contact:e.metadata.contact,className:"h-8 w-8"}),(0,r.jsxs)("div",{className:"ml-4 text-sm font-medium text-gray-900 flex items-center space-x-2",children:[e.metadata.contact.name,e.metadata.contact&&(0,r.jsx)(y.Z,{contact:e.metadata.contact,className:"ml-2 h-4 w-4"})]})]}),(0,r.jsxs)("div",{className:"ml-6 text-sm font-medium text-gray-700",children:["open"===e.peer._channel.readyState?"Connected":"Invited",(0,r.jsxs)("span",{className:"sr-only",children:[" ",e.metadata.contact.name]})]})]},t)}))})})};function C(e){var t=e.open,n=e.setOpen,x=e.networkId,p=e.type,y=e.localStream,C=e.title,I=e.subtitle,S=(0,a.useState)([]),F=S[0],A=S[1],O=(0,a.useState)(!1),E=O[0],T=O[1],Z=j((0,l.KO)(c.fo),2)[1],_=j((0,l.KO)(c.C3),1)[0],K=j((0,l.KO)(c.uy),1)[0],B=j((0,l.KO)(d.r2),1)[0],P=j((0,l.KO)(d.PF),2),V=P[0],U=P[1],q=(0,m.LU)().data,z=(0,f.$3)().mutate,D=(0,g.p)().data,H=function(e){return"video-call-invitation"===e?_:"doc-collab-request"===e?K:void 0};(0,a.useEffect)((function(){V&&(null===V||void 0===V?void 0:V.length)>0&&(V.forEach((function(e){A((function(t){return w(t).concat([e])}))})),U([]))}),[V,U]);return(0,r.jsx)(i.u.Root,{show:t,as:a.Fragment,children:(0,r.jsx)(s.V,{as:"div",className:"fixed inset-0 overflow-hidden z-10",onClose:n,children:(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,r.jsx)(i.u.Child,{as:a.Fragment,enter:"ease-in-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)(s.V.Overlay,{className:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,r.jsx)("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:(0,r.jsx)(i.u.Child,{as:a.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,r.jsx)("div",{className:"pointer-events-auto relative w-96",children:(0,r.jsx)(i.u.Child,{as:a.Fragment,enter:"ease-in-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsxs)("div",{className:"h-full grid grid-rows-6 grid-cols-1",children:[(0,r.jsxs)("div",{className:"bg-primary py-8 px-4 sm:px-6 row-span-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(s.V.Title,{className:"text-lg font-medium text-white",children:[" ",C," "]}),(0,r.jsx)("div",{className:"ml-3 flex h-7 items-center",children:(0,r.jsxs)("button",{type:"button",className:"rounded-md bg-primary text-indigo-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-white",onClick:function(){return n(!1)},children:[(0,r.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,r.jsx)(o.Z,{className:"h-6 w-6","aria-hidden":"true"})]})})]}),(0,r.jsxs)("div",{className:"mt-1",children:[(0,r.jsx)("p",{className:"text-sm text-indigo-300 pb-2",children:I}),(0,r.jsxs)("p",{className:"text-sm text-indigo-300",children:["ID: ",x]})]})]}),(0,r.jsxs)("div",{className:"row-span-5 flex flex-col bg-white",children:[(0,r.jsx)("div",{className:"grow-0 px-4 py-4 sm:px-6",children:(0,r.jsxs)("div",{className:"flex justify-center items-center space-x-6",children:[(0,r.jsx)("button",{className:b(E?"text-gray-500 hover:text-gray-700":"bg-indigo-100 text-indigo-700","px-3 py-2 font-medium text-sm rounded-md"),onClick:function(){return T(!1)},children:"Invite"}),(0,r.jsx)("button",{className:b(E?"bg-indigo-100 text-indigo-700":"text-gray-500 hover:text-gray-700","px-3 py-2 font-medium text-sm rounded-md"),onClick:function(){return T(!0)},children:"Participants"})]})}),(0,r.jsx)("div",{className:"grow h-full max-h-full overflow-y-auto px-4",children:E?(0,r.jsx)(k,{peers:H(p)}):(0,r.jsx)(N,{selected:F,setSelected:A,peers:H(p),networkId:x})}),F.length>0&&(0,r.jsx)("div",{className:"grow-0 px-4 py-4 sm:px-6",children:(0,r.jsx)("button",{type:"button",onClick:function(){return function(){var e=x||currentVideoCallId,t=H(p);F.forEach((function(n){var r=t.find((function(t){return t.metadata.dest===n.did&&t.metadata.networkId===e}));if(r)console.log("A duplicate peer already exist on the network...skipping.");else{var a=t.map((function(e){return e.metadata})),i=(0,u.aH)({networkId:e,networkOwner:q.id,sendBasicMessage:z,lightningEnabled:B,src:q.id,contact:n,type:p,localStream:y,currentPeer:r,existingNetworkPeers:a,settings:D});Z(i)}})),A([]),h.Am.info("Invitations sent!"),"doc-collab-request"===p&&(0,v.X$)("save-draft-local-state")}()},className:"w-full flex-1 rounded-md border border-transparent bg-primary py-3 px-3 text-md font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:F.length>1?"Send Invitations (".concat(F.length,")"):"Send Invitation"})})]})]})})})})})]})})})}}}]);